<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MIKMIDI: /Users/bradleyross/Documents/GitHub/version2/MIKMIDI/Source/MIKMIDISequencer.m Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MIKMIDI
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_e5fbe6d2783ccd4c93c7856d92d7be6e.html">GitHub</a></li><li class="navelem"><a class="el" href="../../dir_9775a5eba1e819cad31bd89e37b0abb3.html">version2</a></li><li class="navelem"><a class="el" href="../../dir_e30e3098fdb8194b109f908d621b7970.html">MIKMIDI</a></li><li class="navelem"><a class="el" href="../../dir_d588bca7f4d238e5415e8d82b8ec56e8.html">Source</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">MIKMIDISequencer.m</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d4/ddf/_m_i_k_m_i_d_i_sequencer_8m.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//  MIKMIDISequencer.m</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//  MIKMIDI</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">//  Created by Chris Flesner on 11/26/14.</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//  Copyright (c) 2014 Mixed In Key. All rights reserved.</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160; </div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#import &quot;<a class="code" href="../../d3/d43/_m_i_k_m_i_d_i_sequencer_8h.html">MIKMIDISequencer.h</a>&quot;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#import &lt;mach/mach_time.h&gt;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#import &quot;<a class="code" href="../../de/dab/_m_i_k_m_i_d_i_sequence_8h.html">MIKMIDISequence.h</a>&quot;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#import &quot;<a class="code" href="../../d1/dd9/_m_i_k_m_i_d_i_track_8h.html">MIKMIDITrack.h</a>&quot;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#import &quot;<a class="code" href="../../d2/d4c/_m_i_k_m_i_d_i_clock_8h.html">MIKMIDIClock.h</a>&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#import &quot;<a class="code" href="../../d9/d8a/_m_i_k_m_i_d_i_tempo_event_8h.html">MIKMIDITempoEvent.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#import &quot;<a class="code" href="../../d1/db3/_m_i_k_m_i_d_i_note_event_8h.html">MIKMIDINoteEvent.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#import &quot;<a class="code" href="../../d8/ddf/_m_i_k_m_i_d_i_channel_event_8h.html">MIKMIDIChannelEvent.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#import &quot;<a class="code" href="../../d6/d8c/_m_i_k_m_i_d_i_note_on_command_8h.html">MIKMIDINoteOnCommand.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#import &quot;<a class="code" href="../../db/d40/_m_i_k_m_i_d_i_note_off_command_8h.html">MIKMIDINoteOffCommand.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#import &quot;<a class="code" href="../../db/d1b/_m_i_k_m_i_d_i_device_manager_8h.html">MIKMIDIDeviceManager.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#import &quot;<a class="code" href="../../d4/dc8/_m_i_k_m_i_d_i_metronome_8h.html">MIKMIDIMetronome.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#import &quot;<a class="code" href="../../da/d5a/_m_i_k_m_i_d_i_meta_time_signature_event_8h.html">MIKMIDIMetaTimeSignatureEvent.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#import &quot;<a class="code" href="../../da/d38/_m_i_k_m_i_d_i_utilities_8h.html">MIKMIDIUtilities.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#import &quot;<a class="code" href="../../dd/d56/_m_i_k_m_i_d_i_synthesizer_8h.html">MIKMIDISynthesizer.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#import &quot;<a class="code" href="../../db/d4f/_m_i_k_m_i_d_i_sequencer_09_m_i_k_m_i_d_i_private_8h.html">MIKMIDISequencer+MIKMIDIPrivate.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#import &quot;<a class="code" href="../../dc/d01/_m_i_k_m_i_d_i_sequence_09_m_i_k_m_i_d_i_private_8h.html">MIKMIDISequence+MIKMIDIPrivate.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#import &quot;<a class="code" href="../../d7/ddc/_m_i_k_m_i_d_i_command_scheduler_8h.html">MIKMIDICommandScheduler.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#import &quot;<a class="code" href="../../df/def/_m_i_k_m_i_d_i_destination_endpoint_8h.html">MIKMIDIDestinationEndpoint.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#import &quot;<a class="code" href="../../da/dc8/_m_i_k_m_i_d_i_control_change_command_8h.html">MIKMIDIControlChangeCommand.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#import &quot;<a class="code" href="../../dd/da3/_m_i_k_m_i_d_i_control_change_event_8h.html">MIKMIDIControlChangeEvent.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160; </div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160; </div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#if !__has_feature(objc_arc)</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#error MIKMIDISequencer.m must be compiled with ARC. Either turn on ARC for the project or set the -fobjc-arc flag for MIKMIDISequencer.m in the Build Phases for this target</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160; </div>
<div class="line"><a name="l00036"></a><span class="lineno"><a class="line" href="../../d4/ddf/_m_i_k_m_i_d_i_sequencer_8m.html#a6abff4b7df1a05343503b3eda229dc87">   36</a></span>&#160;<span class="preprocessor">#define kDefaultTempo   120</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160; </div>
<div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="../../d4/ddf/_m_i_k_m_i_d_i_sequencer_8m.html#a676be339e7cde9f2d054f2c835d3b188">   38</a></span>&#160;NSString * <span class="keyword">const</span> <a class="code" href="../../d4/ddf/_m_i_k_m_i_d_i_sequencer_8m.html#a676be339e7cde9f2d054f2c835d3b188">MIKMIDISequencerWillLoopNotification</a> = <span class="stringliteral">@&quot;MIKMIDISequencerWillLoopNotification&quot;</span>;</div>
<div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="../../d4/ddf/_m_i_k_m_i_d_i_sequencer_8m.html#a756b3ad1167b608698a2ab882fd68267">   39</a></span>&#160;<span class="keyword">const</span> MusicTimeStamp <a class="code" href="../../d4/ddf/_m_i_k_m_i_d_i_sequencer_8m.html#a756b3ad1167b608698a2ab882fd68267">MIKMIDISequencerEndOfSequenceLoopEndTimeStamp</a> = -1;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160; </div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160; </div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#pragma mark -</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160; </div>
<div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="../../dd/d0f/interface_m_i_k_m_i_d_i_event_with_destination.html">   44</a></span>&#160;<span class="keyword">@interface </span><a class="code" href="../../dd/d0f/interface_m_i_k_m_i_d_i_event_with_destination.html">MIKMIDIEventWithDestination</a> : <a class="code" href="../../d7/dc4/class_n_s_object.html">NSObject</a></div>
<div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="../../dd/d0f/interface_m_i_k_m_i_d_i_event_with_destination.html#ad1db1bc0e024f394e8d17f7624bd0165">   45</a></span>&#160;<span class="keyword">@property</span> (nonatomic, strong) <a class="code" href="../../d0/d2f/interface_m_i_k_m_i_d_i_event.html">MIKMIDIEvent</a> *<a class="code" href="../../dd/d0f/interface_m_i_k_m_i_d_i_event_with_destination.html#ad1db1bc0e024f394e8d17f7624bd0165">event</a>;</div>
<div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="../../dd/d0f/interface_m_i_k_m_i_d_i_event_with_destination.html#ae94caeac576376d5922ab62eafd5702d">   46</a></span>&#160;<span class="keyword">@property</span> (nonatomic, strong) id&lt;MIKMIDICommandScheduler&gt; <a class="code" href="../../dd/d0f/interface_m_i_k_m_i_d_i_event_with_destination.html#ae94caeac576376d5922ab62eafd5702d">destination</a>;</div>
<div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="../../dd/d0f/interface_m_i_k_m_i_d_i_event_with_destination.html#a6645fda9e26e19942158f1199c3c81f8">   47</a></span>&#160;<span class="keyword">@property</span> (nonatomic, readonly) BOOL <a class="code" href="../../dd/d0f/interface_m_i_k_m_i_d_i_event_with_destination.html#a6645fda9e26e19942158f1199c3c81f8">representsNoteOff</a>;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;+ (instancetype)eventWithDestination:(<span class="keywordtype">id</span>&lt;<a class="code" href="../../da/d84/protocol_m_i_k_m_i_d_i_command_scheduler-p.html">MIKMIDICommandScheduler</a>&gt;)destination event:(<a class="code" href="../../d0/d2f/interface_m_i_k_m_i_d_i_event.html">MIKMIDIEvent</a> *)event;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;+ (instancetype)eventWithDestination:(<span class="keywordtype">id</span>&lt;<a class="code" href="../../da/d84/protocol_m_i_k_m_i_d_i_command_scheduler-p.html">MIKMIDICommandScheduler</a>&gt;)destination event:(<a class="code" href="../../d0/d2f/interface_m_i_k_m_i_d_i_event.html">MIKMIDIEvent</a> *)event representsNoteOff:(BOOL)representsNoteOff;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="keyword">@end</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160; </div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160; </div>
<div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="../../d4/d4f/interface_m_i_k_m_i_d_i_command_with_destination.html">   53</a></span>&#160;<span class="keyword">@interface </span><a class="code" href="../../d4/d4f/interface_m_i_k_m_i_d_i_command_with_destination.html">MIKMIDICommandWithDestination</a> : <a class="code" href="../../d7/dc4/class_n_s_object.html">NSObject</a></div>
<div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="../../d4/d4f/interface_m_i_k_m_i_d_i_command_with_destination.html#a058ac1cfbff1856525f935e800539d4f">   54</a></span>&#160;<span class="keyword">@property</span> (nonatomic, strong) <a class="code" href="../../d4/daa/interface_m_i_k_m_i_d_i_command.html">MIKMIDICommand</a> *command;</div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="../../d4/d4f/interface_m_i_k_m_i_d_i_command_with_destination.html#a38e117b4982ebf659c4861c75d0191f0">   55</a></span>&#160;<span class="keyword">@property</span> (nonatomic, strong) id&lt;MIKMIDICommandScheduler&gt; <a class="code" href="../../dd/d0f/interface_m_i_k_m_i_d_i_event_with_destination.html#ae94caeac576376d5922ab62eafd5702d">destination</a>;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;+ (instancetype)commandWithDestination:(<span class="keywordtype">id</span>&lt;<a class="code" href="../../da/d84/protocol_m_i_k_m_i_d_i_command_scheduler-p.html">MIKMIDICommandScheduler</a>&gt;)destination command:(<a class="code" href="../../d4/daa/interface_m_i_k_m_i_d_i_command.html">MIKMIDICommand</a> *)command;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="keyword">@end</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160; </div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160; </div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="../../d9/d75/interface_m_i_k_m_i_d_i_pending_note_offs_for_time_stamp.html">   60</a></span>&#160;<span class="keyword">@interface </span><a class="code" href="../../d9/d75/interface_m_i_k_m_i_d_i_pending_note_offs_for_time_stamp.html">MIKMIDIPendingNoteOffsForTimeStamp</a> : <a class="code" href="../../d7/dc4/class_n_s_object.html">NSObject</a></div>
<div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="../../d9/d75/interface_m_i_k_m_i_d_i_pending_note_offs_for_time_stamp.html#af02dee145a2c5e79c756b90178831292">   61</a></span>&#160;<span class="keyword">@property</span> (nonatomic, strong) NSMutableArray *noteEventsWithEndTimeStamp;</div>
<div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="../../d9/d75/interface_m_i_k_m_i_d_i_pending_note_offs_for_time_stamp.html#a44ab7db1462b9040fe6e4da32eee56f6">   62</a></span>&#160;<span class="keyword">@property</span> (nonatomic) MusicTimeStamp endTimeStamp;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;+ (instancetype)pendingNoteOffWithEndTimeStamp:(MusicTimeStamp)endTimeStamp;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="keyword">@end</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160; </div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160; </div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor">#pragma mark -</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160; </div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="keyword">@interface </span><a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html">MIKMIDISequencer</a> ()</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;{</div>
<div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a5e7b8fbd06aa81bffc581b826901bd35">   71</a></span>&#160;    <span class="keywordtype">void</span> *<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a5e7b8fbd06aa81bffc581b826901bd35">_processingQueueKey</a>;</div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a74fd882fb2fa3476bc043b307f58947c">   72</a></span>&#160;    <span class="keywordtype">void</span> *<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a74fd882fb2fa3476bc043b307f58947c">_processingQueueContext</a>;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;}</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160; </div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a280b5699f9025565d35d2e7382cb8937">   75</a></span>&#160;<span class="keyword">@property</span> (readonly, nonatomic) <a class="code" href="../../d0/d11/interface_m_i_k_m_i_d_i_clock.html">MIKMIDIClock</a> *<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a280b5699f9025565d35d2e7382cb8937">clock</a>;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160; </div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="keyword">@property</span> (nonatomic, getter=<a class="code" href="../../d1/d6d/_m_i_k_m_i_d_i_player_8h.html#a7238591466f34a690890ccdeea490770">isPlaying</a>) BOOL <a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a5eed37470d79e24efc982d816cfa1ba7">playing</a>;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="keyword">@property</span> (nonatomic, getter=isRecording) BOOL <a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a1c2862190557cf600c1c5f3063c076a7">recording</a>;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="keyword">@property</span> (nonatomic, getter=isLooping) BOOL <a class="code" href="../../d1/d6d/_m_i_k_m_i_d_i_player_8h.html#afb9cfcbd0156d614a95235b9f5b0b525">looping</a>;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160; </div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="keyword">@property</span> (nonatomic) MIDITimeStamp <a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a7db2d4109205d2d0395066639e33d300">latestScheduledMIDITimeStamp</a>;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160; </div>
<div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a9d9a37013a0665d217c49653faa22e7c">   83</a></span>&#160;<span class="keyword">@property</span> (nonatomic, strong) NSMutableDictionary *<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a9d9a37013a0665d217c49653faa22e7c">pendingNoteOffs</a>;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160; </div>
<div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a49c1e2960f74d28ab3b16126360eaf81">   85</a></span>&#160;<span class="keyword">@property</span> (nonatomic, strong) NSMutableDictionary *<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a49c1e2960f74d28ab3b16126360eaf81">pendingRecordedNoteEvents</a>;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#af2bbc8b3ac58108540a5c51dbabc58e7">   87</a></span>&#160;<span class="keyword">@property</span> (nonatomic) MusicTimeStamp <a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#af2bbc8b3ac58108540a5c51dbabc58e7">startingTimeStamp</a>;</div>
<div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#acd319e1845e51b2e0675b4bd0dc17635">   88</a></span>&#160;<span class="keyword">@property</span> (nonatomic) MusicTimeStamp <a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#acd319e1845e51b2e0675b4bd0dc17635">initialStartingTimeStamp</a>;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160; </div>
<div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a0f1fcc35a82f4f049154d5f790b29152">   90</a></span>&#160;<span class="keyword">@property</span> (nonatomic, strong) NSMapTable *<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a0f1fcc35a82f4f049154d5f790b29152">tracksToDestinationsMap</a>;</div>
<div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#afc1cb8eb8adf0c06cdfb5f8e55f9daed">   91</a></span>&#160;<span class="keyword">@property</span> (nonatomic, strong) NSMapTable *<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#afc1cb8eb8adf0c06cdfb5f8e55f9daed">tracksToDefaultSynthsMap</a>;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160; </div>
<div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#aef58fb3a76437df11377167f1edd4112">   93</a></span>&#160;<span class="keyword">@property</span> (nonatomic) BOOL <a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#aef58fb3a76437df11377167f1edd4112">needsCurrentTempoUpdate</a>;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160; </div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="keyword">@property</span> (readonly, nonatomic) MusicTimeStamp <a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#aadf30b839f27d048cbad1a59d6961500">sequenceLength</a>;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160; </div>
<div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a8956a1f11ac1590aa940600b7802c950">   97</a></span>&#160;<span class="keyword">@property</span> (nonatomic) dispatch_queue_t <a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a8956a1f11ac1590aa940600b7802c950">processingQueue</a>;</div>
<div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a5169f0cd5a9f8edc315c79d57aec14ac">   98</a></span>&#160;<span class="keyword">@property</span> (nonatomic) dispatch_source_t <a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#acddcf0efd24e2eda128d7756394636f4">processingTimer</a>;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160; </div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="keyword">@end</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160; </div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160; </div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="keyword">@implementation </span><a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html">MIKMIDISequencer</a></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; </div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="preprocessor">#pragma mark - Lifecycle</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160; </div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;- (instancetype)initWithSequence:(<a class="code" href="../../dd/d88/interface_m_i_k_m_i_d_i_sequence.html">MIKMIDISequence</a> *)sequence</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;{</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">self</span> = [super <a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#aa70b35d2585ca3413cd3a5d1b046f44d">init</a>]) {</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        <span class="keyword">self</span>.<a class="code" href="../../dd/d88/interface_m_i_k_m_i_d_i_sequence.html#a18fe0af4f402243d03b95a5f2f4715b9">sequence</a> = <a class="code" href="../../d1/d6d/_m_i_k_m_i_d_i_player_8h.html#a778959c6924aa58e80aaddfdc7f20fdd">sequence</a>;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        _clock = [<a class="code" href="../../d0/d11/interface_m_i_k_m_i_d_i_clock.html">MIKMIDIClock</a> <a class="code" href="../../d0/d11/interface_m_i_k_m_i_d_i_clock.html#a761544a04fca337fe8a5cfd6d82ef493">clock</a>];</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        _syncedClock = [_clock syncedClock];</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        _loopEndTimeStamp = <a class="code" href="../../d4/ddf/_m_i_k_m_i_d_i_sequencer_8m.html#a756b3ad1167b608698a2ab882fd68267">MIKMIDISequencerEndOfSequenceLoopEndTimeStamp</a>;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        _preRoll = 4;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        _clickTrackStatus = MIKMIDISequencerClickTrackStatusEnabledInRecord;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        _tracksToDestinationsMap = [NSMapTable mapTableWithKeyOptions:NSPointerFunctionsStrongMemory valueOptions:NSPointerFunctionsStrongMemory];</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        _tracksToDefaultSynthsMap = [NSMapTable mapTableWithKeyOptions:NSPointerFunctionsStrongMemory valueOptions:NSPointerFunctionsStrongMemory];</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        _createSynthsIfNeeded = YES;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        <a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a5e7b8fbd06aa81bffc581b826901bd35">_processingQueueKey</a> = &amp;<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a5e7b8fbd06aa81bffc581b826901bd35">_processingQueueKey</a>;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        <a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a74fd882fb2fa3476bc043b307f58947c">_processingQueueContext</a> = &amp;<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a74fd882fb2fa3476bc043b307f58947c">_processingQueueContext</a>;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        _maximumLookAheadInterval = 0.1;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    }</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">self</span>;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;}</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160; </div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;+ (instancetype)sequencerWithSequence:(<a class="code" href="../../dd/d88/interface_m_i_k_m_i_d_i_sequence.html">MIKMIDISequence</a> *)sequence</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;{</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keywordflow">return</span> [[<span class="keyword">self</span> alloc] initWithSequence:sequence];</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;}</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160; </div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;- (instancetype)<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#aa70b35d2585ca3413cd3a5d1b046f44d">init</a></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;{</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="keywordflow">return</span> [<span class="keyword">self</span> initWithSequence:[<a class="code" href="../../dd/d88/interface_m_i_k_m_i_d_i_sequence.html">MIKMIDISequence</a> <a class="code" href="../../dd/d88/interface_m_i_k_m_i_d_i_sequence.html#a18fe0af4f402243d03b95a5f2f4715b9">sequence</a>]];</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;}</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160; </div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;+ (instancetype)<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#ae7ef1a6bb3bd2c3dc4e32d84dbc84396">sequencer</a></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;{</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keywordflow">return</span> [[<span class="keyword">self</span> alloc] init];</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;}</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160; </div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;- (void)<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a8758a6e14c24dfdc1c94a6cd02c44e1c">dealloc</a></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;{</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    [_sequence removeObserver:self forKeyPath:@&quot;tracks&quot;];</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keyword">self</span>.processingTimer = NULL;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;}</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160; </div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="preprocessor">#pragma mark - Playback</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160; </div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;- (void)<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#aef8a43dd9cfc6208fe1b8c394466eab2">startPlayback</a></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;{</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    [<span class="keyword">self</span> startPlaybackAtTimeStamp:0];</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;}</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160; </div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;- (void)startPlaybackAtTimeStamp:(MusicTimeStamp)timeStamp</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;{</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    [<span class="keyword">self</span> startPlaybackAtTimeStamp:timeStamp adjustForPreRollWhenRecording:YES];</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;}</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160; </div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;- (void)startPlaybackAtTimeStamp:(MusicTimeStamp)timeStamp adjustForPreRollWhenRecording:(BOOL)adjustForPreRoll</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;{</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    MIDITimeStamp midiTimeStamp = <a class="code" href="../../da/d38/_m_i_k_m_i_d_i_utilities_8h.html#adba1e5973777fba4873cc5e0fb8620a3">MIKMIDIGetCurrentTimeStamp</a>() + <a class="code" href="../../d2/d4c/_m_i_k_m_i_d_i_clock_8h.html#a55a94b39e580083b6f1c036f433af05b">MIKMIDIClockMIDITimeStampsPerTimeInterval</a>(0.001);</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    [<span class="keyword">self</span> startPlaybackAtTimeStamp:timeStamp MIDITimeStamp:midiTimeStamp];</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;}</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160; </div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;- (void)startPlaybackAtTimeStamp:(MusicTimeStamp)timeStamp MIDITimeStamp:(MIDITimeStamp)midiTimeStamp</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;{</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    [<span class="keyword">self</span> startPlaybackAtTimeStamp:timeStamp MIDITimeStamp:midiTimeStamp adjustForPreRollWhenRecording:YES];</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;}</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160; </div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;- (void)startPlaybackAtTimeStamp:(MusicTimeStamp)timeStamp MIDITimeStamp:(MIDITimeStamp)midiTimeStamp adjustForPreRollWhenRecording:(BOOL)adjustForPreRoll</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;{</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">self</span>.<a class="code" href="../../d1/d6d/_m_i_k_m_i_d_i_player_8h.html#a7238591466f34a690890ccdeea490770">isPlaying</a>) [<span class="keyword">self</span> stop];</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keywordflow">if</span> (adjustForPreRoll &amp;&amp; <span class="keyword">self</span>.isRecording) timeStamp -= self.<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#ad604e1615b7bd4576487a2a469a25f84">preRoll</a>;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160; </div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    NSString *queueLabel = [[[NSBundle mainBundle] bundleIdentifier] stringByAppendingFormat:@&quot;.%@.%p&quot;, [<span class="keyword">self</span> class], self];</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    dispatch_queue_attr_t attr = DISPATCH_QUEUE_SERIAL;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160; </div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="preprocessor">#if defined (__MAC_10_10) || defined (__IPHONE_8_0)</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="keywordflow">if</span> (@available(macOS 10.10, iOS 8, *)) {</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        <span class="keywordflow">if</span> (&amp;dispatch_queue_attr_make_with_qos_class != NULL) {</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;            attr = dispatch_queue_attr_make_with_qos_class(DISPATCH_QUEUE_SERIAL, QOS_CLASS_USER_INITIATED, 0);</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        }</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    }</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160; </div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    dispatch_queue_t queue = dispatch_queue_create(queueLabel.UTF8String, attr);</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    dispatch_queue_set_specific(queue, &amp;<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a5e7b8fbd06aa81bffc581b826901bd35">_processingQueueKey</a>, &amp;<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a74fd882fb2fa3476bc043b307f58947c">_processingQueueContext</a>, NULL);</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keyword">self</span>.processingQueue = queue;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160; </div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    dispatch_sync(queue, ^{</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        <span class="keyword">self</span>.startingTimeStamp = timeStamp;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <span class="keyword">self</span>.initialStartingTimeStamp = timeStamp;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160; </div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        Float64 startingTempo = [<span class="keyword">self</span>.sequence tempoAtTimeStamp:timeStamp];</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        <span class="keywordflow">if</span> (!startingTempo) startingTempo = <a class="code" href="../../d4/ddf/_m_i_k_m_i_d_i_sequencer_8m.html#a6abff4b7df1a05343503b3eda229dc87">kDefaultTempo</a>;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        [<span class="keyword">self</span> updateClockWithMusicTimeStamp:timeStamp tempo:startingTempo atMIDITimeStamp:midiTimeStamp];</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    });</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160; </div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keyword">self</span>.playing = YES;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160; </div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    dispatch_sync(queue, ^{</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        <span class="keyword">self</span>.pendingNoteOffs = [NSMutableDictionary dictionary];</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <span class="keyword">self</span>.latestScheduledMIDITimeStamp = midiTimeStamp;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        dispatch_source_t timer = dispatch_source_create(DISPATCH_SOURCE_TYPE_TIMER, 0, 0, <span class="keyword">self</span>.<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a8956a1f11ac1590aa940600b7802c950">processingQueue</a>);</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        <span class="keywordflow">if</span> (!timer) <span class="keywordflow">return</span> NSLog(<span class="stringliteral">@&quot;Unable to create processing timer for %@.&quot;</span>, [<span class="keyword">self</span> <span class="keyword">class</span>]);</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        <span class="keyword">self</span>.processingTimer = timer;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160; </div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        dispatch_source_set_timer(timer, DISPATCH_TIME_NOW, 0.05 * NSEC_PER_SEC, 0.05 * NSEC_PER_SEC);</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        dispatch_source_set_event_handler(timer, ^{</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            [<span class="keyword">self</span> processSequenceStartingFromMIDITimeStamp:self.latestScheduledMIDITimeStamp];</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        });</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160; </div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        dispatch_resume(timer);</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    });</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;}</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160; </div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;- (void)<a class="code" href="../../d1/d6d/_m_i_k_m_i_d_i_player_8h.html#a090d3d389dfb6387baeefb2e1e938059">resumePlayback</a></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;{</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    [<span class="keyword">self</span> startPlaybackAtTimeStamp:self.currentTimeStamp];</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;}</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160; </div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;- (void)<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a80bf74de83095b60b8f372830377cac2">stop</a></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;{</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    [<span class="keyword">self</span> stopWithDispatchToProcessingQueue:YES];</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;}</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160; </div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;- (void)stopAllPlayingNotesForCommandScheduler:(<span class="keywordtype">id</span>&lt;<a class="code" href="../../da/d84/protocol_m_i_k_m_i_d_i_command_scheduler-p.html">MIKMIDICommandScheduler</a>&gt;)scheduler</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;{</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    [<span class="keyword">self</span> dispatchSyncToProcessingQueueAsNeeded:^{</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        NSMutableArray *commandsToSendNow = [NSMutableArray array];</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        MIDITimeStamp offTimeStamp = MIKMIDIGetCurrentTimeStamp() + MIKMIDIClockMIDITimeStampsPerTimeInterval(self.maximumLookAheadInterval);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160; </div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        for (MIKMIDIPendingNoteOffsForTimeStamp *pendingNoteOffsForTimeStamp in self.pendingNoteOffs.allValues) {</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;            NSMutableArray *noteEvents = pendingNoteOffsForTimeStamp.noteEventsWithEndTimeStamp;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            NSUInteger count = noteEvents.count;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            NSMutableIndexSet *indexesToRemove = [NSMutableIndexSet indexSet];</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;            for (NSUInteger i = 0; i &lt; count; i++) {</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                <a class="code" href="../../dd/d0f/interface_m_i_k_m_i_d_i_event_with_destination.html">MIKMIDIEventWithDestination</a> *event = noteEvents[i];</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                if (event.destination == scheduler) {</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                    [indexesToRemove addIndex:i];</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160; </div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                    MIKMIDINoteEvent *noteEvent = (MIKMIDINoteEvent *)event.event;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                    MIKMIDINoteOffCommand *command = [<a class="code" href="../../dc/d60/interface_m_i_k_m_i_d_i_note_off_command.html">MIKMIDINoteOffCommand</a> <a class="code" href="../../dc/d60/interface_m_i_k_m_i_d_i_note_off_command.html#ab9ab88fbcb2624b2c27cbce93643d0eb">noteOffCommandWithNote</a>:noteEvent.note <a class="code" href="../../dc/d60/interface_m_i_k_m_i_d_i_note_off_command.html#ab9ab88fbcb2624b2c27cbce93643d0eb">velocity</a>:0 <a class="code" href="../../dc/d60/interface_m_i_k_m_i_d_i_note_off_command.html#ab9ab88fbcb2624b2c27cbce93643d0eb">channel</a>:noteEvent.channel <a class="code" href="../../dc/d60/interface_m_i_k_m_i_d_i_note_off_command.html#ab9ab88fbcb2624b2c27cbce93643d0eb">midiTimeStamp</a>:offTimeStamp];</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                    [commandsToSendNow addObject:command];</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                }</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;            }</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160; </div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;            [noteEvents removeObjectsAtIndexes:indexesToRemove];</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        }</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160; </div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        if (commandsToSendNow.count) [<span class="keyword">self</span> scheduleCommands:commandsToSendNow withCommandScheduler:scheduler];</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    }];</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;}</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160; </div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;- (void)stopWithDispatchToProcessingQueue:(BOOL)dispatchToProcessingQueue</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;{</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    MIDITimeStamp stopTimeStamp = <a class="code" href="../../da/d38/_m_i_k_m_i_d_i_utilities_8h.html#adba1e5973777fba4873cc5e0fb8620a3">MIKMIDIGetCurrentTimeStamp</a>();</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keywordflow">if</span> (!<span class="keyword">self</span>.<a class="code" href="../../d1/d6d/_m_i_k_m_i_d_i_player_8h.html#a7238591466f34a690890ccdeea490770">isPlaying</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160; </div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    void (^<a class="code" href="../../d1/d6d/_m_i_k_m_i_d_i_player_8h.html#a04ba35ebb81d17ae6690ef4331a2449d">stopPlayback</a>)(void) = ^{</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        <span class="keyword">self</span>.processingTimer = NULL;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160; </div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <a class="code" href="../../d0/d11/interface_m_i_k_m_i_d_i_clock.html">MIKMIDIClock</a> *<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a280b5699f9025565d35d2e7382cb8937">clock</a> = <span class="keyword">self</span>.<a class="code" href="../../d0/d11/interface_m_i_k_m_i_d_i_clock.html#a761544a04fca337fe8a5cfd6d82ef493">clock</a>;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        [<span class="keyword">self</span> recordAllPendingNoteEventsWithOffTimeStamp:[clock <a class="code" href="../../d0/d11/interface_m_i_k_m_i_d_i_clock.html#a56905a8c9fa7777a15f6cee6c3e3beb7">musicTimeStampForMIDITimeStamp</a>:stopTimeStamp]];</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        MusicTimeStamp allPendingNotesOffTimeStamp = MAX(<span class="keyword">self</span>.<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a7db2d4109205d2d0395066639e33d300">latestScheduledMIDITimeStamp</a> + 1, <a class="code" href="../../da/d38/_m_i_k_m_i_d_i_utilities_8h.html#adba1e5973777fba4873cc5e0fb8620a3">MIKMIDIGetCurrentTimeStamp</a>() + <a class="code" href="../../d2/d4c/_m_i_k_m_i_d_i_clock_8h.html#a55a94b39e580083b6f1c036f433af05b">MIKMIDIClockMIDITimeStampsPerTimeInterval</a>(0.001));</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        [<span class="keyword">self</span> sendAllPendingNoteOffsWithMIDITimeStamp:allPendingNotesOffTimeStamp];</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        <span class="keyword">self</span>.pendingRecordedNoteEvents = nil;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        <span class="keyword">self</span>.looping = NO;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160; </div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        MusicTimeStamp stopMusicTimeStamp = [clock <a class="code" href="../../d0/d11/interface_m_i_k_m_i_d_i_clock.html#a56905a8c9fa7777a15f6cee6c3e3beb7">musicTimeStampForMIDITimeStamp</a>:stopTimeStamp];</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        <span class="keyword">self</span>-&gt;_currentTimeStamp = (stopMusicTimeStamp &lt;= <span class="keyword">self</span>.sequenceLength) ? stopMusicTimeStamp : <span class="keyword">self</span>.<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#aadf30b839f27d048cbad1a59d6961500">sequenceLength</a>;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160; </div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        [clock <a class="code" href="../../d0/d11/interface_m_i_k_m_i_d_i_clock.html#a3b148aafbd4332f081d15fb7872819a6">unsyncMusicTimeStampsAndTemposFromMIDITimeStamps</a>];</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    };</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160; </div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    dispatchToProcessingQueue ? dispatch_sync(<span class="keyword">self</span>.<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a8956a1f11ac1590aa940600b7802c950">processingQueue</a>, <a class="code" href="../../d1/d6d/_m_i_k_m_i_d_i_player_8h.html#a04ba35ebb81d17ae6690ef4331a2449d">stopPlayback</a>) : <a class="code" href="../../d1/d6d/_m_i_k_m_i_d_i_player_8h.html#a04ba35ebb81d17ae6690ef4331a2449d">stopPlayback</a>();</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160; </div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="keyword">self</span>.processingQueue = NULL;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="keyword">self</span>.playing = NO;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="keyword">self</span>.recording = NO;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;}</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160; </div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;- (void)processSequenceStartingFromMIDITimeStamp:(MIDITimeStamp)fromMIDITimeStamp</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;{</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    MIDITimeStamp toMIDITimeStamp = <a class="code" href="../../da/d38/_m_i_k_m_i_d_i_utilities_8h.html#adba1e5973777fba4873cc5e0fb8620a3">MIKMIDIGetCurrentTimeStamp</a>() + <a class="code" href="../../d2/d4c/_m_i_k_m_i_d_i_clock_8h.html#a55a94b39e580083b6f1c036f433af05b">MIKMIDIClockMIDITimeStampsPerTimeInterval</a>(self.<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#ad0d8cd85164dfee28483297808e71031">maximumLookAheadInterval</a>);</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keywordflow">if</span> (toMIDITimeStamp &lt; fromMIDITimeStamp) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <a class="code" href="../../d0/d11/interface_m_i_k_m_i_d_i_clock.html">MIKMIDIClock</a> *<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a280b5699f9025565d35d2e7382cb8937">clock</a> = <span class="keyword">self</span>.<a class="code" href="../../d0/d11/interface_m_i_k_m_i_d_i_clock.html#a761544a04fca337fe8a5cfd6d82ef493">clock</a>;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160; </div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <a class="code" href="../../dd/d88/interface_m_i_k_m_i_d_i_sequence.html">MIKMIDISequence</a> *<a class="code" href="../../d1/d6d/_m_i_k_m_i_d_i_player_8h.html#a778959c6924aa58e80aaddfdc7f20fdd">sequence</a> = <span class="keyword">self</span>.<a class="code" href="../../dd/d88/interface_m_i_k_m_i_d_i_sequence.html#a18fe0af4f402243d03b95a5f2f4715b9">sequence</a>;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    MusicTimeStamp <a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a03c6b737d11d6237d3a014e773c25634">loopStartTimeStamp</a> = <span class="keyword">self</span>.loopStartTimeStamp;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    MusicTimeStamp <a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a8aecec6c365cebbf42cead88d499a126">loopEndTimeStamp</a> = <span class="keyword">self</span>.effectiveLoopEndTimeStamp;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    MusicTimeStamp fromMusicTimeStamp = [clock <a class="code" href="../../d0/d11/interface_m_i_k_m_i_d_i_clock.html#a56905a8c9fa7777a15f6cee6c3e3beb7">musicTimeStampForMIDITimeStamp</a>:fromMIDITimeStamp];</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    MusicTimeStamp calculatedToMusicTimeStamp = [clock <a class="code" href="../../d0/d11/interface_m_i_k_m_i_d_i_clock.html#a56905a8c9fa7777a15f6cee6c3e3beb7">musicTimeStampForMIDITimeStamp</a>:toMIDITimeStamp];</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    BOOL isLooping = (<span class="keyword">self</span>.shouldLoop &amp;&amp; calculatedToMusicTimeStamp &gt; <a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a03c6b737d11d6237d3a014e773c25634">loopStartTimeStamp</a> &amp;&amp; <a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a8aecec6c365cebbf42cead88d499a126">loopEndTimeStamp</a> &gt; <a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a03c6b737d11d6237d3a014e773c25634">loopStartTimeStamp</a>);</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="keywordflow">if</span> (isLooping != <span class="keyword">self</span>.isLooping) <span class="keyword">self</span>.looping = isLooping;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    MusicTimeStamp maxToMusicTimeStamp = <span class="keyword">self</span>.isRecording ? DBL_MAX : <span class="keyword">self</span>.sequenceLength; <span class="comment">// If recording, don&#39;t limit max timestamp (Issue #45)</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    maxToMusicTimeStamp = isLooping ? <a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a8aecec6c365cebbf42cead88d499a126">loopEndTimeStamp</a> : maxToMusicTimeStamp;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    MusicTimeStamp toMusicTimeStamp = MIN(calculatedToMusicTimeStamp, maxToMusicTimeStamp);</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    MIDITimeStamp actualToMIDITimeStamp = [clock <a class="code" href="../../d0/d11/interface_m_i_k_m_i_d_i_clock.html#a90926beed6a3c7efcb1cb536b25361b0">midiTimeStampForMusicTimeStamp</a>:toMusicTimeStamp];</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160; </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="comment">// Get relevant tempo events</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    NSMutableDictionary *allEventsByTimeStamp = [NSMutableDictionary dictionary];</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    NSMutableDictionary *tempoEventsByTimeStamp = [NSMutableDictionary dictionary];</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    Float64 overrideTempo = <span class="keyword">self</span>.tempo;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160; </div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keywordflow">if</span> (!overrideTempo) {</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        NSArray *sequenceTempoEvents = [sequence.tempoTrack eventsOfClass:[<a class="code" href="../../d5/da9/interface_m_i_k_m_i_d_i_tempo_event.html">MIKMIDITempoEvent</a> class] fromTimeStamp:MAX(fromMusicTimeStamp, 0) toTimeStamp:toMusicTimeStamp];</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="../../d5/da9/interface_m_i_k_m_i_d_i_tempo_event.html">MIKMIDITempoEvent</a> *tempoEvent in sequenceTempoEvents) {</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;            NSNumber *timeStampKey = @(tempoEvent.timeStamp);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;            allEventsByTimeStamp[timeStampKey] = [NSMutableArray arrayWithObject:tempoEvent];</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;            tempoEventsByTimeStamp[timeStampKey] = tempoEvent;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        }</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    }</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160; </div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">self</span>.<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#aef58fb3a76437df11377167f1edd4112">needsCurrentTempoUpdate</a>) {</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        <span class="keywordflow">if</span> (!tempoEventsByTimeStamp.count) {</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;            <span class="keywordflow">if</span> (!overrideTempo) overrideTempo = [sequence <a class="code" href="../../dd/d88/interface_m_i_k_m_i_d_i_sequence.html#ad3b5258ee9914d55e21810ea1e558d0c">tempoAtTimeStamp</a>:fromMusicTimeStamp];</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;            <span class="keywordflow">if</span> (!overrideTempo) overrideTempo = <a class="code" href="../../d4/ddf/_m_i_k_m_i_d_i_sequencer_8m.html#a6abff4b7df1a05343503b3eda229dc87">kDefaultTempo</a>;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160; </div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;            <a class="code" href="../../d5/da9/interface_m_i_k_m_i_d_i_tempo_event.html">MIKMIDITempoEvent</a> *tempoEvent = [<a class="code" href="../../d5/da9/interface_m_i_k_m_i_d_i_tempo_event.html">MIKMIDITempoEvent</a> <a class="code" href="../../d5/da9/interface_m_i_k_m_i_d_i_tempo_event.html#a2c7f0b75bf80d8c7c7751800af7a09a6">tempoEventWithTimeStamp</a>:fromMusicTimeStamp <a class="code" href="../../d5/da9/interface_m_i_k_m_i_d_i_tempo_event.html#a2c7f0b75bf80d8c7c7751800af7a09a6">tempo</a>:overrideTempo];</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;            NSNumber *timeStampKey = @(fromMusicTimeStamp);</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;            allEventsByTimeStamp[timeStampKey] = [NSMutableArray arrayWithObject:tempoEvent];</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            tempoEventsByTimeStamp[timeStampKey] = tempoEvent;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        }</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        <span class="keyword">self</span>.needsCurrentTempoUpdate = NO;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    }</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160; </div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="comment">// Get pending note off events</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    NSMutableDictionary *<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a9d9a37013a0665d217c49653faa22e7c">pendingNoteOffs</a> = <span class="keyword">self</span>.pendingNoteOffs;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="keywordflow">for</span> (NSNumber *timeStampKey in [<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a9d9a37013a0665d217c49653faa22e7c">pendingNoteOffs</a> copy]) {</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        MusicTimeStamp pendingNoteOffsMusicTimeStamp = timeStampKey.doubleValue;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        <span class="keywordflow">if</span> (pendingNoteOffsMusicTimeStamp &lt; fromMusicTimeStamp) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        <span class="keywordflow">if</span> (pendingNoteOffsMusicTimeStamp &gt; toMusicTimeStamp) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        <span class="keywordflow">if</span> (isLooping &amp;&amp; (pendingNoteOffsMusicTimeStamp == <a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a8aecec6c365cebbf42cead88d499a126">loopEndTimeStamp</a>)) <span class="keywordflow">continue</span>; <span class="comment">// These pending note offs will be handled right before we loop</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160; </div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        NSMutableArray *eventsAtTimeStamp = allEventsByTimeStamp[timeStampKey] ? allEventsByTimeStamp[timeStampKey] : [NSMutableArray array];</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        [eventsAtTimeStamp addObject:pendingNoteOffs[timeStampKey]];</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        allEventsByTimeStamp[timeStampKey] = eventsAtTimeStamp;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        [pendingNoteOffs removeObjectForKey:timeStampKey];</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    }</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160; </div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="comment">// Get other events</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    NSMutableArray *nonMutedTracks = [[NSMutableArray alloc] init];</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    NSMutableArray *soloTracks = [[NSMutableArray alloc] init];</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../db/dce/interface_m_i_k_m_i_d_i_track.html">MIKMIDITrack</a> *track in <a class="code" href="../../d1/d6d/_m_i_k_m_i_d_i_player_8h.html#a778959c6924aa58e80aaddfdc7f20fdd">sequence</a>.<a class="code" href="../../dd/d88/interface_m_i_k_m_i_d_i_sequence.html#aa002aa0100e38724caf1a308a008d16a">tracks</a>) {</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        <span class="keywordflow">if</span> (track.isMuted) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160; </div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        [nonMutedTracks addObject:track];</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        <span class="keywordflow">if</span> (track.solo) { [soloTracks addObject:track]; }</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    }</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160; </div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="comment">// Never play muted tracks. If any non-muted tracks are soloed, only play those. Matches MusicPlayer behavior</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    NSArray *tracksToPlay = soloTracks.count != 0 ? soloTracks : nonMutedTracks;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160; </div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../db/dce/interface_m_i_k_m_i_d_i_track.html">MIKMIDITrack</a> *track in tracksToPlay) {</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        MusicTimeStamp startTimeStamp = MAX(fromMusicTimeStamp - track.offset, 0);</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        MusicTimeStamp endTimeStamp = toMusicTimeStamp - track.offset;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        NSArray *events = [track eventsFromTimeStamp:startTimeStamp toTimeStamp:endTimeStamp];</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        <span class="keywordflow">if</span> (track.offset != 0) {</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;            <span class="comment">// Shift events by offset</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;            NSMutableArray *shiftedEvents = [NSMutableArray array];</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="../../d0/d2f/interface_m_i_k_m_i_d_i_event.html">MIKMIDIEvent</a> *<a class="code" href="../../dd/d0f/interface_m_i_k_m_i_d_i_event_with_destination.html#ad1db1bc0e024f394e8d17f7624bd0165">event</a> in events) {</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                <a class="code" href="../../df/d47/interface_m_i_k_mutable_m_i_d_i_event.html">MIKMutableMIDIEvent</a> *shiftedEvent = [event mutableCopy];</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                shiftedEvent.<a class="code" href="../../df/d47/interface_m_i_k_mutable_m_i_d_i_event.html#a007f95632be233226611d9c2de76da6a">timeStamp</a> += track.offset;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                [shiftedEvents addObject:shiftedEvent];</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            }</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;            events = shiftedEvents;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        }</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160; </div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        id&lt;MIKMIDICommandScheduler&gt; <a class="code" href="../../dd/d0f/interface_m_i_k_m_i_d_i_event_with_destination.html#ae94caeac576376d5922ab62eafd5702d">destination</a> = events.count ? [<span class="keyword">self</span> commandSchedulerForTrack:track] : nil;   <span class="comment">// only get the destination if there&#39;s events so we don&#39;t create a destination endpoint if not needed</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="../../d0/d2f/interface_m_i_k_m_i_d_i_event.html">MIKMIDIEvent</a> *<a class="code" href="../../dd/d0f/interface_m_i_k_m_i_d_i_event_with_destination.html#ad1db1bc0e024f394e8d17f7624bd0165">event</a> in events) {</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;            <span class="keywordflow">if</span> ([<a class="code" href="../../dd/d0f/interface_m_i_k_m_i_d_i_event_with_destination.html#ad1db1bc0e024f394e8d17f7624bd0165">event</a> isKindOfClass:[<a class="code" href="../../d7/d3c/interface_m_i_k_m_i_d_i_note_event.html">MIKMIDINoteEvent</a> <span class="keyword">class</span>]] &amp;&amp; [(<a class="code" href="../../d7/d3c/interface_m_i_k_m_i_d_i_note_event.html">MIKMIDINoteEvent</a> *)<a class="code" href="../../dd/d0f/interface_m_i_k_m_i_d_i_event_with_destination.html#ad1db1bc0e024f394e8d17f7624bd0165">event</a> duration] &lt;= 0) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;            NSNumber *timeStampKey = @(<span class="keyword">event</span>.timeStamp);</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;            NSMutableArray *eventsAtTimeStamp = allEventsByTimeStamp[timeStampKey] ? allEventsByTimeStamp[timeStampKey] : [NSMutableArray array];</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;            [eventsAtTimeStamp addObject:[<a class="code" href="../../dd/d0f/interface_m_i_k_m_i_d_i_event_with_destination.html">MIKMIDIEventWithDestination</a> <a class="code" href="../../dd/d0f/interface_m_i_k_m_i_d_i_event_with_destination.html#a6175664b570e32a220e3e54485238604">eventWithDestination</a>:destination <a class="code" href="../../dd/d0f/interface_m_i_k_m_i_d_i_event_with_destination.html#a6175664b570e32a220e3e54485238604">event</a>:event]];</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;            allEventsByTimeStamp[timeStampKey] = eventsAtTimeStamp;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        }</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    }</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160; </div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <span class="comment">// Get click track events</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../dd/d0f/interface_m_i_k_m_i_d_i_event_with_destination.html">MIKMIDIEventWithDestination</a> *destinationEvent in [<span class="keyword">self</span> clickTrackEventsFromTimeStamp:fromMusicTimeStamp toTimeStamp:toMusicTimeStamp]) {</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        NSNumber *timeStampKey = @(destinationEvent.event.timeStamp);</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        NSMutableArray *eventsAtTimesStamp = allEventsByTimeStamp[timeStampKey] ? allEventsByTimeStamp[timeStampKey] : [NSMutableArray array];</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        [eventsAtTimesStamp addObject:destinationEvent];</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        allEventsByTimeStamp[timeStampKey] = eventsAtTimesStamp;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    }</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160; </div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="comment">// Schedule events</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="keywordflow">for</span> (NSNumber *timeStampKey in [allEventsByTimeStamp.allKeys sortedArrayUsingSelector:<span class="keyword">@selector</span>(compare:)]) {</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        MusicTimeStamp musicTimeStamp = timeStampKey.doubleValue;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        <span class="keywordflow">if</span> (isLooping &amp;&amp; (musicTimeStamp &lt; loopStartTimeStamp || musicTimeStamp &gt;= <a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a8aecec6c365cebbf42cead88d499a126">loopEndTimeStamp</a>)) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        MIDITimeStamp midiTimeStamp = [clock <a class="code" href="../../d0/d11/interface_m_i_k_m_i_d_i_clock.html#a90926beed6a3c7efcb1cb536b25361b0">midiTimeStampForMusicTimeStamp</a>:musicTimeStamp];</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        <span class="keywordflow">if</span> (midiTimeStamp &lt; <a class="code" href="../../da/d38/_m_i_k_m_i_d_i_utilities_8h.html#adba1e5973777fba4873cc5e0fb8620a3">MIKMIDIGetCurrentTimeStamp</a>() &amp;&amp; midiTimeStamp &gt; fromMIDITimeStamp) <span class="keywordflow">continue</span>;    <span class="comment">// prevents events that were just recorded from being scheduled</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160; </div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        <a class="code" href="../../d5/da9/interface_m_i_k_m_i_d_i_tempo_event.html">MIKMIDITempoEvent</a> *tempoEventAtTimeStamp = tempoEventsByTimeStamp[timeStampKey];</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        <span class="keywordflow">if</span> (tempoEventAtTimeStamp) [<span class="keyword">self</span> updateClockWithMusicTimeStamp:musicTimeStamp tempo:tempoEventAtTimeStamp.bpm atMIDITimeStamp:midiTimeStamp];</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160; </div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        NSArray *events = allEventsByTimeStamp[timeStampKey];</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">id</span> eventObject in events) {</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;            <span class="keywordflow">if</span> ([eventObject isKindOfClass:[<a class="code" href="../../dd/d0f/interface_m_i_k_m_i_d_i_event_with_destination.html">MIKMIDIEventWithDestination</a> <span class="keyword">class</span>]]) {</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                [<span class="keyword">self</span> scheduleEventWithDestination:eventObject];</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ([eventObject isKindOfClass:[<a class="code" href="../../d9/d75/interface_m_i_k_m_i_d_i_pending_note_offs_for_time_stamp.html">MIKMIDIPendingNoteOffsForTimeStamp</a> <span class="keyword">class</span>]]) {</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                <span class="keywordflow">for</span> (<a class="code" href="../../dd/d0f/interface_m_i_k_m_i_d_i_event_with_destination.html">MIKMIDIEventWithDestination</a> *noteOffEvent in [eventObject noteEventsWithEndTimeStamp]) {</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;                    [<span class="keyword">self</span> scheduleEventWithDestination:noteOffEvent];</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;                }</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;            }</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        }</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    }</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160; </div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="keyword">self</span>.latestScheduledMIDITimeStamp = actualToMIDITimeStamp;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160; </div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <span class="comment">// Handle looping or stopping at the end of the sequence</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="keywordflow">if</span> (isLooping) {</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        <span class="keywordflow">if</span> (calculatedToMusicTimeStamp &gt; toMusicTimeStamp) {</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;            [<span class="keyword">self</span> recordAllPendingNoteEventsWithOffTimeStamp:loopEndTimeStamp];</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;            Float64 <a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a98ee6a37a982195d818523d7f09d1a88">tempo</a> = [sequence <a class="code" href="../../dd/d88/interface_m_i_k_m_i_d_i_sequence.html#ad3b5258ee9914d55e21810ea1e558d0c">tempoAtTimeStamp</a>:loopStartTimeStamp];</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a98ee6a37a982195d818523d7f09d1a88">tempo</a>) <a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a98ee6a37a982195d818523d7f09d1a88">tempo</a> = <a class="code" href="../../d4/ddf/_m_i_k_m_i_d_i_sequencer_8m.html#a6abff4b7df1a05343503b3eda229dc87">kDefaultTempo</a>;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;            MusicTimeStamp loopLength = <a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a8aecec6c365cebbf42cead88d499a126">loopEndTimeStamp</a> - <a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a03c6b737d11d6237d3a014e773c25634">loopStartTimeStamp</a>;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160; </div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;            MIDITimeStamp loopStartMIDITimeStamp = [clock <a class="code" href="../../d0/d11/interface_m_i_k_m_i_d_i_clock.html#a90926beed6a3c7efcb1cb536b25361b0">midiTimeStampForMusicTimeStamp</a>:loopStartTimeStamp + loopLength];</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;            [<span class="keyword">self</span> sendAllPendingNoteOffsWithMIDITimeStamp:loopStartMIDITimeStamp];</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;            [<span class="keyword">self</span> updateClockWithMusicTimeStamp:loopStartTimeStamp tempo:tempo atMIDITimeStamp:loopStartMIDITimeStamp];</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160; </div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;            <span class="keyword">self</span>.startingTimeStamp = <a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a03c6b737d11d6237d3a014e773c25634">loopStartTimeStamp</a>;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;            [[NSNotificationCenter defaultCenter] postNotificationName:MIKMIDISequencerWillLoopNotification object:self userInfo:nil];</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;            [<span class="keyword">self</span> processSequenceStartingFromMIDITimeStamp:loopStartMIDITimeStamp];</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        }</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<span class="keyword">self</span>.isRecording) { <span class="comment">// Don&#39;t stop automatically during recording</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        MIDITimeStamp systemTimeStamp = <a class="code" href="../../da/d38/_m_i_k_m_i_d_i_utilities_8h.html#adba1e5973777fba4873cc5e0fb8620a3">MIKMIDIGetCurrentTimeStamp</a>();</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        <span class="keywordflow">if</span> ((systemTimeStamp &gt; actualToMIDITimeStamp) &amp;&amp; ([<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a280b5699f9025565d35d2e7382cb8937">clock</a> musicTimeStampForMIDITimeStamp:systemTimeStamp] &gt;= <span class="keyword">self</span>.<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#aadf30b839f27d048cbad1a59d6961500">sequenceLength</a>)) {</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;            [<span class="keyword">self</span> stopWithDispatchToProcessingQueue:NO];</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        }</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    }</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;}</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160; </div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;- (void)scheduleEventWithDestination:(<a class="code" href="../../dd/d0f/interface_m_i_k_m_i_d_i_event_with_destination.html">MIKMIDIEventWithDestination</a> *)destinationEvent</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;{</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <a class="code" href="../../d0/d2f/interface_m_i_k_m_i_d_i_event.html">MIKMIDIEvent</a> *<span class="keyword">event</span> = destinationEvent.<a class="code" href="../../dd/d0f/interface_m_i_k_m_i_d_i_event_with_destination.html#ad1db1bc0e024f394e8d17f7624bd0165">event</a>;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    id&lt;MIKMIDICommandScheduler&gt; <a class="code" href="../../dd/d0f/interface_m_i_k_m_i_d_i_event_with_destination.html#ae94caeac576376d5922ab62eafd5702d">destination</a> = destinationEvent.<a class="code" href="../../dd/d0f/interface_m_i_k_m_i_d_i_event_with_destination.html#ae94caeac576376d5922ab62eafd5702d">destination</a>;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <a class="code" href="../../d0/d11/interface_m_i_k_m_i_d_i_clock.html">MIKMIDIClock</a> *<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a280b5699f9025565d35d2e7382cb8937">clock</a> = <span class="keyword">self</span>.<a class="code" href="../../d0/d11/interface_m_i_k_m_i_d_i_clock.html#a761544a04fca337fe8a5cfd6d82ef493">clock</a>;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <a class="code" href="../../d4/daa/interface_m_i_k_m_i_d_i_command.html">MIKMIDICommand</a> *command;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160; </div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d0f/interface_m_i_k_m_i_d_i_event_with_destination.html#ad1db1bc0e024f394e8d17f7624bd0165">event</a>.<a class="code" href="../../d0/d2f/interface_m_i_k_m_i_d_i_event.html#a9de783028847375ed96f45ed9958c470">eventType</a> == MIKMIDIEventTypeMIDINoteMessage) {</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        <span class="keywordflow">if</span> (destinationEvent.<a class="code" href="../../dd/d0f/interface_m_i_k_m_i_d_i_event_with_destination.html#a6645fda9e26e19942158f1199c3c81f8">representsNoteOff</a>) {</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;            command = [<a class="code" href="../../d4/daa/interface_m_i_k_m_i_d_i_command.html">MIKMIDICommand</a> <a class="code" href="../../d4/daa/interface_m_i_k_m_i_d_i_command.html#ac728e768d83d362f15f0f1af86a9270b">noteOffCommandFromNoteEvent</a>:(MIKMIDINoteEvent *)event <a class="code" href="../../d4/daa/interface_m_i_k_m_i_d_i_command.html#ac728e768d83d362f15f0f1af86a9270b">clock</a>:clock];</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;            <a class="code" href="../../d7/d3c/interface_m_i_k_m_i_d_i_note_event.html">MIKMIDINoteEvent</a> *noteEvent = (<a class="code" href="../../d7/d3c/interface_m_i_k_m_i_d_i_note_event.html">MIKMIDINoteEvent</a> *)<a class="code" href="../../dd/d0f/interface_m_i_k_m_i_d_i_event_with_destination.html#ad1db1bc0e024f394e8d17f7624bd0165">event</a>;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;            command = [<a class="code" href="../../d4/daa/interface_m_i_k_m_i_d_i_command.html">MIKMIDICommand</a> <a class="code" href="../../d4/daa/interface_m_i_k_m_i_d_i_command.html#accbd01a02766991b8b55b546ab9036bf">noteOnCommandFromNoteEvent</a>:noteEvent <a class="code" href="../../d4/daa/interface_m_i_k_m_i_d_i_command.html#accbd01a02766991b8b55b546ab9036bf">clock</a>:clock];</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160; </div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;            <span class="comment">// Add note off to pending note offs</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;            MusicTimeStamp endTimeStamp = noteEvent.<a class="code" href="../../d7/d3c/interface_m_i_k_m_i_d_i_note_event.html#a9c4204db8a4f3241243a79738b661c4e">endTimeStamp</a>;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;            NSMutableDictionary *<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a9d9a37013a0665d217c49653faa22e7c">pendingNoteOffs</a> = <span class="keyword">self</span>.pendingNoteOffs;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;            <a class="code" href="../../d9/d75/interface_m_i_k_m_i_d_i_pending_note_offs_for_time_stamp.html">MIKMIDIPendingNoteOffsForTimeStamp</a> *pendingNoteOffsForEndTimeStamp = <a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a9d9a37013a0665d217c49653faa22e7c">pendingNoteOffs</a>[@(endTimeStamp)];</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;            <span class="keywordflow">if</span> (!pendingNoteOffsForEndTimeStamp) {</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                pendingNoteOffsForEndTimeStamp = [<a class="code" href="../../d9/d75/interface_m_i_k_m_i_d_i_pending_note_offs_for_time_stamp.html">MIKMIDIPendingNoteOffsForTimeStamp</a> <a class="code" href="../../d9/d75/interface_m_i_k_m_i_d_i_pending_note_offs_for_time_stamp.html#a2b3a04f4d295477b2760e32c27ac5dcd">pendingNoteOffWithEndTimeStamp</a>:endTimeStamp];</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                <a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a9d9a37013a0665d217c49653faa22e7c">pendingNoteOffs</a>[@(endTimeStamp)] = pendingNoteOffsForEndTimeStamp;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;            }</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;            [pendingNoteOffsForEndTimeStamp.noteEventsWithEndTimeStamp addObject:[<a class="code" href="../../dd/d0f/interface_m_i_k_m_i_d_i_event_with_destination.html">MIKMIDIEventWithDestination</a> eventWithDestination:destination event:event representsNoteOff:YES]];</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        }</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ([<a class="code" href="../../dd/d0f/interface_m_i_k_m_i_d_i_event_with_destination.html#ad1db1bc0e024f394e8d17f7624bd0165">event</a> isKindOfClass:[<a class="code" href="../../d7/de9/interface_m_i_k_m_i_d_i_channel_event.html">MIKMIDIChannelEvent</a> <span class="keyword">class</span>]]) {</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        command = [<a class="code" href="../../d4/daa/interface_m_i_k_m_i_d_i_command.html">MIKMIDICommand</a> <a class="code" href="../../d4/daa/interface_m_i_k_m_i_d_i_command.html#a9351c27d026d087fe9e5c8851ca0436d">commandFromChannelEvent</a>:(MIKMIDIChannelEvent *)event <a class="code" href="../../d4/daa/interface_m_i_k_m_i_d_i_command.html#a9351c27d026d087fe9e5c8851ca0436d">clock</a>:clock];</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    }</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160; </div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="keywordflow">if</span> (command) [<span class="keyword">self</span> scheduleCommands:@[command] withCommandScheduler:destination];</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;}</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160; </div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;- (void)sendAllPendingNoteOffsWithMIDITimeStamp:(MIDITimeStamp)offTimeStamp</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;{</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    NSMutableDictionary *noteOffs = <span class="keyword">self</span>.pendingNoteOffs;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <span class="keywordflow">if</span> (!noteOffs.count) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160; </div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    NSMapTable *noteOffDestinationsToCommands = [NSMapTable mapTableWithKeyOptions:NSPointerFunctionsStrongMemory valueOptions:NSPointerFunctionsStrongMemory];</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <a class="code" href="../../d0/d11/interface_m_i_k_m_i_d_i_clock.html">MIKMIDIClock</a> *<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a280b5699f9025565d35d2e7382cb8937">clock</a> = <span class="keyword">self</span>.<a class="code" href="../../d0/d11/interface_m_i_k_m_i_d_i_clock.html#a761544a04fca337fe8a5cfd6d82ef493">clock</a>;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160; </div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <span class="keywordflow">for</span> (NSNumber *musicTimeStampNumber in noteOffs) {</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        <a class="code" href="../../d9/d75/interface_m_i_k_m_i_d_i_pending_note_offs_for_time_stamp.html">MIKMIDIPendingNoteOffsForTimeStamp</a> *<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a9d9a37013a0665d217c49653faa22e7c">pendingNoteOffs</a> = noteOffs[musicTimeStampNumber];</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="../../dd/d0f/interface_m_i_k_m_i_d_i_event_with_destination.html">MIKMIDIEventWithDestination</a> *noteOffEventWithDestination in <a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a9d9a37013a0665d217c49653faa22e7c">pendingNoteOffs</a>.noteEventsWithEndTimeStamp) {</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;            <a class="code" href="../../d7/d3c/interface_m_i_k_m_i_d_i_note_event.html">MIKMIDINoteEvent</a> *<span class="keyword">event</span> = (<a class="code" href="../../d7/d3c/interface_m_i_k_m_i_d_i_note_event.html">MIKMIDINoteEvent</a> *)noteOffEventWithDestination.event;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;            id&lt;MIKMIDICommandScheduler&gt; <a class="code" href="../../dd/d0f/interface_m_i_k_m_i_d_i_event_with_destination.html#ae94caeac576376d5922ab62eafd5702d">destination</a> = noteOffEventWithDestination.destination;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;            NSMutableArray *noteOffCommandsForDestination = [noteOffDestinationsToCommands objectForKey:<a class="code" href="../../dd/d0f/interface_m_i_k_m_i_d_i_event_with_destination.html#ae94caeac576376d5922ab62eafd5702d">destination</a>] ? [noteOffDestinationsToCommands objectForKey:<a class="code" href="../../dd/d0f/interface_m_i_k_m_i_d_i_event_with_destination.html#ae94caeac576376d5922ab62eafd5702d">destination</a>] : [NSMutableArray array];</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160; </div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;            <a class="code" href="../../d7/deb/interface_m_i_k_mutable_m_i_d_i_command.html">MIKMutableMIDICommand</a> *noteOffCommand = [[<a class="code" href="../../d4/daa/interface_m_i_k_m_i_d_i_command.html">MIKMIDICommand</a> noteOffCommandFromNoteEvent:<a class="code" href="../../dd/d0f/interface_m_i_k_m_i_d_i_event_with_destination.html#ad1db1bc0e024f394e8d17f7624bd0165">event</a> <a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a280b5699f9025565d35d2e7382cb8937">clock</a>:<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a280b5699f9025565d35d2e7382cb8937">clock</a>] mutableCopy];</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;            noteOffCommand.<a class="code" href="../../d7/deb/interface_m_i_k_mutable_m_i_d_i_command.html#a5783fcba63015d7114b98fa17241e5d7">midiTimestamp</a> = offTimeStamp;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;            [noteOffCommandsForDestination addObject:noteOffCommand];</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;            [noteOffDestinationsToCommands setObject:noteOffCommandsForDestination forKey:<a class="code" href="../../dd/d0f/interface_m_i_k_m_i_d_i_event_with_destination.html#ae94caeac576376d5922ab62eafd5702d">destination</a>];</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        }</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    }</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160; </div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <span class="keywordflow">for</span> (id&lt;MIKMIDICommandScheduler&gt; scheduler in [[noteOffDestinationsToCommands keyEnumerator] allObjects]) {</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        [<span class="keyword">self</span> scheduleCommands:[noteOffDestinationsToCommands objectForKey:scheduler] withCommandScheduler:scheduler];</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    }</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160; </div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    [noteOffs removeAllObjects];</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;}</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160; </div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;- (void)updateClockWithMusicTimeStamp:(MusicTimeStamp)musicTimeStamp tempo:(Float64)tempo atMIDITimeStamp:(MIDITimeStamp)midiTimeStamp</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;{</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <span class="comment">// Override tempo if neccessary</span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    Float64 tempoOverride = <span class="keyword">self</span>.tempo;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="keywordflow">if</span> (tempoOverride) <a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a98ee6a37a982195d818523d7f09d1a88">tempo</a> = tempoOverride;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    [<span class="keyword">self</span>.clock syncMusicTimeStamp:musicTimeStamp withMIDITimeStamp:midiTimeStamp tempo:tempo];</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;}</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160; </div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;- (void)scheduleCommands:(NSArray *)commands withCommandScheduler:(<span class="keywordtype">id</span>&lt;<a class="code" href="../../da/d84/protocol_m_i_k_m_i_d_i_command_scheduler-p.html">MIKMIDICommandScheduler</a>&gt;)scheduler</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;{</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    [scheduler <a class="code" href="../../da/d84/protocol_m_i_k_m_i_d_i_command_scheduler-p.html#a0fc929bd9c9c1e4816e6c5a8f58ba48f">scheduleMIDICommands</a>:[<span class="keyword">self</span> modifiedMIDICommandsFromCommandsToBeScheduled:commands forCommandScheduler:scheduler]];</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;}</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160; </div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;- (NSArray *)modifiedMIDICommandsFromCommandsToBeScheduled:(NSArray *)commandsToBeScheduled forCommandScheduler:(<span class="keywordtype">id</span>&lt;<a class="code" href="../../da/d84/protocol_m_i_k_m_i_d_i_command_scheduler-p.html">MIKMIDICommandScheduler</a>&gt;)scheduler { <span class="keywordflow">return</span> commandsToBeScheduled; }</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160; </div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="preprocessor">#pragma mark - Recording</span></div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160; </div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;- (void)<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#aa6a7f0f4033a133bafcd0594e14d0365">startRecording</a></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;{</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    [<span class="keyword">self</span> prepareForRecordingWithPreRoll:YES];</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    [<span class="keyword">self</span> startPlayback];</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;}</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160; </div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;- (void)startRecordingAtTimeStamp:(MusicTimeStamp)timeStamp</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;{</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    [<span class="keyword">self</span> prepareForRecordingWithPreRoll:YES];</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    [<span class="keyword">self</span> startPlaybackAtTimeStamp:timeStamp];</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;}</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160; </div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;- (void)startRecordingAtTimeStamp:(MusicTimeStamp)timeStamp MIDITimeStamp:(MIDITimeStamp)midiTimeStamp</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;{</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    [<span class="keyword">self</span> prepareForRecordingWithPreRoll:YES];</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    [<span class="keyword">self</span> startPlaybackAtTimeStamp:timeStamp MIDITimeStamp:midiTimeStamp];</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;}</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160; </div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;- (void)<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a7c5d1de53ee71d4af6f28e1a35acf87d">resumeRecording</a></div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;{</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    [<span class="keyword">self</span> prepareForRecordingWithPreRoll:YES];</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    [<span class="keyword">self</span> resumePlayback];</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;}</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160; </div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;- (void)prepareForRecordingWithPreRoll:(BOOL)includePreRoll</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;{</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <span class="keyword">self</span>.pendingRecordedNoteEvents = [NSMutableDictionary dictionary];</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <span class="keyword">self</span>.recording = YES;</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;}</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160; </div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;- (void)recordMIDICommand:(<a class="code" href="../../d4/daa/interface_m_i_k_m_i_d_i_command.html">MIKMIDICommand</a> *)command</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;{</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <span class="keywordflow">if</span> (!<span class="keyword">self</span>.isRecording) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160; </div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    MIDITimeStamp midiTimeStamp = command.<a class="code" href="../../d4/daa/interface_m_i_k_m_i_d_i_command.html#aa9f25080f519483681644189571ad77b">midiTimestamp</a>;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    MusicTimeStamp musicTimeStamp = [<span class="keyword">self</span>.clock musicTimeStampForMIDITimeStamp:midiTimeStamp];</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160; </div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <span class="keywordflow">if</span> (musicTimeStamp &lt; 0) { <span class="keywordflow">return</span>; } <span class="comment">// Command is in pre-roll</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160; </div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <a class="code" href="../../d0/d2f/interface_m_i_k_m_i_d_i_event.html">MIKMIDIEvent</a> *<a class="code" href="../../dd/d0f/interface_m_i_k_m_i_d_i_event_with_destination.html#ad1db1bc0e024f394e8d17f7624bd0165">event</a>;</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <span class="keywordflow">if</span> ([command isKindOfClass:[<a class="code" href="../../db/db2/interface_m_i_k_m_i_d_i_note_on_command.html">MIKMIDINoteOnCommand</a> <span class="keyword">class</span>]]) {             <span class="comment">// note On</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;        <a class="code" href="../../db/db2/interface_m_i_k_m_i_d_i_note_on_command.html">MIKMIDINoteOnCommand</a> *noteOnCommand = (<a class="code" href="../../db/db2/interface_m_i_k_m_i_d_i_note_on_command.html">MIKMIDINoteOnCommand</a> *)command;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        <span class="keywordflow">if</span> (noteOnCommand.<a class="code" href="../../d9/d0e/interface_m_i_k_m_i_d_i_note_command.html#af9b7fd68b2b15542788adc08c4aa4b4e">velocity</a>) {</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;            MIDINoteMessage message = { .<a class="code" href="../../db/dca/interface_m_i_k_m_i_d_i_channel_voice_command.html#a46fb2f2b0fb56a5c345ac4291c95a90f">channel</a> = noteOnCommand.<a class="code" href="../../db/dca/interface_m_i_k_m_i_d_i_channel_voice_command.html#a46fb2f2b0fb56a5c345ac4291c95a90f">channel</a>, .note = noteOnCommand.<a class="code" href="../../d9/d0e/interface_m_i_k_m_i_d_i_note_command.html#a609d689213f42cee0ad9049718f6addd">note</a>, .velocity = noteOnCommand.<a class="code" href="../../d9/d0e/interface_m_i_k_m_i_d_i_note_command.html#af9b7fd68b2b15542788adc08c4aa4b4e">velocity</a>, 0, 0 };</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;            <a class="code" href="../../d4/d28/interface_m_i_k_mutable_m_i_d_i_note_event.html">MIKMutableMIDINoteEvent</a> *noteEvent = [<a class="code" href="../../d4/d28/interface_m_i_k_mutable_m_i_d_i_note_event.html">MIKMutableMIDINoteEvent</a> <a class="code" href="../../d7/d3c/interface_m_i_k_m_i_d_i_note_event.html#a6ead36f5df8d42720689077063b52448">noteEventWithTimeStamp</a>:musicTimeStamp <a class="code" href="../../d7/d3c/interface_m_i_k_m_i_d_i_note_event.html#a6ead36f5df8d42720689077063b52448">message</a>:message];</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;            NSNumber *noteNumber = @(noteOnCommand.<a class="code" href="../../d9/d0e/interface_m_i_k_m_i_d_i_note_command.html#a609d689213f42cee0ad9049718f6addd">note</a>);</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;            NSMutableSet *noteEventsAtNote = <span class="keyword">self</span>.pendingRecordedNoteEvents[noteNumber];</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;            <span class="keywordflow">if</span> (!noteEventsAtNote) {</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;                noteEventsAtNote = [NSMutableSet setWithCapacity:1];</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                <span class="keyword">self</span>.pendingRecordedNoteEvents[noteNumber] = noteEventsAtNote;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;            }</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;            [noteEventsAtNote addObject:noteEvent];</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        } <span class="keywordflow">else</span> {    <span class="comment">// Velocity is 0, treat as a note Off per MIDI spec</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;            <span class="keyword">event</span> = [<span class="keyword">self</span> pendingNoteEventWithNoteNumber:@(noteOnCommand.note) channel:noteOnCommand.channel releaseVelocity:0 offTimeStamp:musicTimeStamp];</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        }</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ([command isKindOfClass:[<a class="code" href="../../dc/d60/interface_m_i_k_m_i_d_i_note_off_command.html">MIKMIDINoteOffCommand</a> <span class="keyword">class</span>]]) {     <span class="comment">// note Off</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        <a class="code" href="../../dc/d60/interface_m_i_k_m_i_d_i_note_off_command.html">MIKMIDINoteOffCommand</a> *noteOffCommand = (<a class="code" href="../../dc/d60/interface_m_i_k_m_i_d_i_note_off_command.html">MIKMIDINoteOffCommand</a> *)command;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        <span class="keyword">event</span> = [<span class="keyword">self</span> pendingNoteEventWithNoteNumber:@(noteOffCommand.note) channel:noteOffCommand.channel releaseVelocity:noteOffCommand.velocity offTimeStamp:musicTimeStamp];</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ([command isKindOfClass:[<a class="code" href="../../dc/d75/interface_m_i_k_m_i_d_i_control_change_command.html">MIKMIDIControlChangeCommand</a> <span class="keyword">class</span>]]) { <span class="comment">// cc command</span></div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        <a class="code" href="../../dc/d75/interface_m_i_k_m_i_d_i_control_change_command.html">MIKMIDIControlChangeCommand</a>* ccCmd = (<a class="code" href="../../dc/d75/interface_m_i_k_m_i_d_i_control_change_command.html">MIKMIDIControlChangeCommand</a>*)command;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        <a class="code" href="../../da/dce/interface_m_i_k_mutable_m_i_d_i_control_change_event.html">MIKMutableMIDIControlChangeEvent</a>* ccEvent = [[<a class="code" href="../../da/dce/interface_m_i_k_mutable_m_i_d_i_control_change_event.html">MIKMutableMIDIControlChangeEvent</a> alloc] init];</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        ccEvent.<a class="code" href="../../da/dce/interface_m_i_k_mutable_m_i_d_i_control_change_event.html#a74a55904c89822f141ed7985d47a07f6">controllerNumber</a> = ccCmd.<a class="code" href="../../dc/d75/interface_m_i_k_m_i_d_i_control_change_command.html#a0957ba57767a95308d0ba69f4dc63347">controllerNumber</a>;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        ccEvent.<a class="code" href="../../da/dce/interface_m_i_k_mutable_m_i_d_i_control_change_event.html#a8e8b56c6563098932d88e4f668c74ca5">controllerValue</a> = ccCmd.<a class="code" href="../../dc/d75/interface_m_i_k_m_i_d_i_control_change_command.html#ae44d928339fd7c11b7fba3614cc62e84">controllerValue</a>;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        ccEvent.<a class="code" href="../../da/dce/interface_m_i_k_mutable_m_i_d_i_control_change_event.html#a2c0b2e6a0795b126216625e43c207a11">channel</a> = ccCmd.<a class="code" href="../../db/dca/interface_m_i_k_m_i_d_i_channel_voice_command.html#a46fb2f2b0fb56a5c345ac4291c95a90f">channel</a>;</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        ccEvent.<a class="code" href="../../da/dce/interface_m_i_k_mutable_m_i_d_i_control_change_event.html#af2c535797be7f7a7273975b2e8c2ef7b">timeStamp</a> = musicTimeStamp;</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        <span class="keyword">event</span> = ccEvent;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    }</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160; </div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d0f/interface_m_i_k_m_i_d_i_event_with_destination.html#ad1db1bc0e024f394e8d17f7624bd0165">event</a>) [<span class="keyword">self</span>.recordEnabledTracks makeObjectsPerformSelector:@selector(addEvent:) withObject:event];</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;}</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160; </div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;- (void)recordAllPendingNoteEventsWithOffTimeStamp:(MusicTimeStamp)offTimeStamp</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;{</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    NSMutableSet *events = [NSMutableSet set];</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160; </div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    NSMutableDictionary *<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a49c1e2960f74d28ab3b16126360eaf81">pendingRecordedNoteEvents</a> = <span class="keyword">self</span>.pendingRecordedNoteEvents;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <span class="keywordflow">for</span> (NSNumber *noteNumber in <a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a49c1e2960f74d28ab3b16126360eaf81">pendingRecordedNoteEvents</a>) {</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="../../d4/d28/interface_m_i_k_mutable_m_i_d_i_note_event.html">MIKMutableMIDINoteEvent</a> *<a class="code" href="../../dd/d0f/interface_m_i_k_m_i_d_i_event_with_destination.html#ad1db1bc0e024f394e8d17f7624bd0165">event</a> in <a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a49c1e2960f74d28ab3b16126360eaf81">pendingRecordedNoteEvents</a>[noteNumber]) {</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;            <span class="keyword">event</span>.releaseVelocity = 0;</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;            <span class="keyword">event</span>.duration = offTimeStamp - <a class="code" href="../../dd/d0f/interface_m_i_k_m_i_d_i_event_with_destination.html#ad1db1bc0e024f394e8d17f7624bd0165">event</a>.timeStamp;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;            [events addObject:event];</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        }</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    }</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <span class="keyword">self</span>.pendingRecordedNoteEvents = [NSMutableDictionary dictionary];</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160; </div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    <span class="keywordflow">if</span> ([events count]) {</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="../../db/dce/interface_m_i_k_m_i_d_i_track.html">MIKMIDITrack</a> *track in <span class="keyword">self</span>.recordEnabledTracks) {</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;            [track addEvents:[events allObjects]];</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        }</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    }</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;}</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160; </div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;- (<a class="code" href="../../d7/d3c/interface_m_i_k_m_i_d_i_note_event.html">MIKMIDINoteEvent</a> *)pendingNoteEventWithNoteNumber:(NSNumber *)noteNumber channel:(UInt8)channel releaseVelocity:(UInt8)releaseVelocity offTimeStamp:(MusicTimeStamp)offTimeStamp</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;{</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    NSMutableSet *pendingRecordedNoteEventsAtNote = <span class="keyword">self</span>.pendingRecordedNoteEvents[noteNumber];</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../d4/d28/interface_m_i_k_mutable_m_i_d_i_note_event.html">MIKMutableMIDINoteEvent</a> *noteEvent in [pendingRecordedNoteEventsAtNote copy]) {</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        <span class="keywordflow">if</span> (channel == noteEvent.channel) {</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;            noteEvent.<a class="code" href="../../d7/d3c/interface_m_i_k_m_i_d_i_note_event.html#a6919d056a06189060abe7b9e10ec7748">releaseVelocity</a> = releaseVelocity;</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;            noteEvent.duration = offTimeStamp - noteEvent.timeStamp;</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160; </div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;            <span class="keywordflow">if</span> (pendingRecordedNoteEventsAtNote.count &gt; 1) {</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                [pendingRecordedNoteEventsAtNote removeObject:noteEvent];</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                [<span class="keyword">self</span>.pendingRecordedNoteEvents removeObjectForKey:noteNumber];</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;            }</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160; </div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;            <span class="keywordflow">return</span> noteEvent;</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;        }</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    }</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    <span class="keywordflow">return</span> nil;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;}</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160; </div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;<span class="preprocessor">#pragma mark - Configuration</span></div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160; </div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;- (void)setCommandScheduler:(<span class="keywordtype">id</span>&lt;<a class="code" href="../../da/d84/protocol_m_i_k_m_i_d_i_command_scheduler-p.html">MIKMIDICommandScheduler</a>&gt;)commandScheduler forTrack:(<a class="code" href="../../db/dce/interface_m_i_k_m_i_d_i_track.html">MIKMIDITrack</a> *)track</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;{</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <span class="keywordflow">if</span> (!commandScheduler) {</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;        [<span class="keyword">self</span>.tracksToDestinationsMap removeObjectForKey:track];</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    }</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    [<span class="keyword">self</span>.tracksToDestinationsMap setObject:commandScheduler forKey:track];</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    [<span class="keyword">self</span>.tracksToDefaultSynthsMap removeObjectForKey:track];</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;}</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160; </div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;- (id&lt;<a class="code" href="../../da/d84/protocol_m_i_k_m_i_d_i_command_scheduler-p.html">MIKMIDICommandScheduler</a>&gt;)commandSchedulerForTrack:(<a class="code" href="../../db/dce/interface_m_i_k_m_i_d_i_track.html">MIKMIDITrack</a> *)track</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;{</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    id&lt;MIKMIDICommandScheduler&gt; result = [<span class="keyword">self</span>.tracksToDestinationsMap objectForKey:track];</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <span class="keywordflow">if</span> (!result &amp;&amp; <span class="keyword">self</span>.shouldCreateSynthsIfNeeded) {</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;        <span class="comment">// Create a default synthesizer</span></div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;        NSError *error = nil;</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;        result = [[<a class="code" href="../../df/deb/interface_m_i_k_m_i_d_i_synthesizer.html">MIKMIDISynthesizer</a> alloc] initWithError:&amp;error];</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;        <span class="keywordflow">if</span> (!result) {</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;            NSLog(<span class="stringliteral">@&quot;Error creating default synthesizer for %@: %@&quot;</span>, track, error);</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;            <span class="keywordflow">return</span> nil;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;        }</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;        [<span class="keyword">self</span> setCommandScheduler:result forTrack:track];</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        [<span class="keyword">self</span>.tracksToDefaultSynthsMap setObject:result forKey:track];</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    }</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;}</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160; </div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;- (<a class="code" href="../../df/deb/interface_m_i_k_m_i_d_i_synthesizer.html">MIKMIDISynthesizer</a> *)builtinSynthesizerForTrack:(<a class="code" href="../../db/dce/interface_m_i_k_m_i_d_i_track.html">MIKMIDITrack</a> *)track</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;{</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    [[<span class="keyword">self</span> commandSchedulerForTrack:track] self]; <span class="comment">// Will force creation of a synth if one doesn&#39;t exist, but should</span></div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    <span class="keywordflow">return</span> [<span class="keyword">self</span>.tracksToDefaultSynthsMap objectForKey:track];</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;}</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160; </div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;<span class="preprocessor">#pragma mark - Click Track</span></div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160; </div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;- (NSMutableArray *)clickTrackEventsFromTimeStamp:(MusicTimeStamp)fromTimeStamp toTimeStamp:(MusicTimeStamp)toTimeStamp</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;{</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <span class="keywordflow">if</span> (!<span class="keyword">self</span>.<a class="code" href="../../d1/d6d/_m_i_k_m_i_d_i_player_8h.html#a2f7a552a2b5379be73e8927355587c79">metronome</a>) <span class="keywordflow">return</span> [NSMutableArray array];</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160; </div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    MIKMIDISequencerClickTrackStatus <a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a8495bd2936fa5e2aa93b2c7d17785f2e">clickTrackStatus</a> = <span class="keyword">self</span>.clickTrackStatus;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a8495bd2936fa5e2aa93b2c7d17785f2e">clickTrackStatus</a> == MIKMIDISequencerClickTrackStatusDisabled) <span class="keywordflow">return</span> nil;</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    <span class="keywordflow">if</span> (!<span class="keyword">self</span>.isRecording &amp;&amp; <a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a8495bd2936fa5e2aa93b2c7d17785f2e">clickTrackStatus</a> != MIKMIDISequencerClickTrackStatusAlwaysEnabled) <span class="keywordflow">return</span> nil;</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160; </div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    NSMutableArray *clickEvents = [NSMutableArray array];</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <a class="code" href="../../d6/da1/interface_m_i_k_m_i_d_i_metronome.html">MIKMIDIMetronome</a> *<a class="code" href="../../d1/d6d/_m_i_k_m_i_d_i_player_8h.html#a2f7a552a2b5379be73e8927355587c79">metronome</a> = <span class="keyword">self</span>.metronome;</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    MIDINoteMessage tickMessage = <a class="code" href="../../d1/d6d/_m_i_k_m_i_d_i_player_8h.html#a2f7a552a2b5379be73e8927355587c79">metronome</a>.<a class="code" href="../../d6/da1/interface_m_i_k_m_i_d_i_metronome.html#a0e1005f305d6f7305636da47e7981481">tickMessage</a>;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    MIDINoteMessage tockMessage = <a class="code" href="../../d1/d6d/_m_i_k_m_i_d_i_player_8h.html#a2f7a552a2b5379be73e8927355587c79">metronome</a>.<a class="code" href="../../d6/da1/interface_m_i_k_m_i_d_i_metronome.html#ae0cea330ea6d4099678274378e29e805">tockMessage</a>;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160; </div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    <a class="code" href="../../dd/d88/interface_m_i_k_m_i_d_i_sequence.html">MIKMIDISequence</a> *<a class="code" href="../../d1/d6d/_m_i_k_m_i_d_i_player_8h.html#a778959c6924aa58e80aaddfdc7f20fdd">sequence</a> = <span class="keyword">self</span>.<a class="code" href="../../dd/d88/interface_m_i_k_m_i_d_i_sequence.html#a18fe0af4f402243d03b95a5f2f4715b9">sequence</a>;</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    <a class="code" href="../../d9/d16/struct_m_i_k_m_i_d_i_time_signature.html">MIKMIDITimeSignature</a> timeSignature = [sequence <a class="code" href="../../dd/d88/interface_m_i_k_m_i_d_i_sequence.html#a9d1c5cc1af8f93ac2f62d797a7fd773a">timeSignatureAtTimeStamp</a>:MAX(fromTimeStamp, 0)];</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    NSMutableArray *timeSignatureEvents = [[sequence.tempoTrack eventsOfClass:[<a class="code" href="../../d7/d3d/interface_m_i_k_m_i_d_i_meta_time_signature_event.html">MIKMIDIMetaTimeSignatureEvent</a> class]</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                                                                fromTimeStamp:MAX(fromTimeStamp, 0)</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;                                                                  toTimeStamp:MAX(toTimeStamp, 0)] mutableCopy];</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160; </div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    MusicTimeStamp clickTimeStamp = floor(fromTimeStamp);</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    <span class="keywordflow">while</span> (clickTimeStamp &lt;= toTimeStamp) {</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a8495bd2936fa5e2aa93b2c7d17785f2e">clickTrackStatus</a> == MIKMIDISequencerClickTrackStatusEnabledOnlyInPreRoll &amp;&amp; clickTimeStamp &gt;= <span class="keyword">self</span>.<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#acd319e1845e51b2e0675b4bd0dc17635">initialStartingTimeStamp</a> + <span class="keyword">self</span>.<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#ad604e1615b7bd4576487a2a469a25f84">preRoll</a>) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160; </div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;        <a class="code" href="../../d7/d3d/interface_m_i_k_m_i_d_i_meta_time_signature_event.html">MIKMIDIMetaTimeSignatureEvent</a> *<span class="keyword">event</span> = [timeSignatureEvents firstObject];</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../dd/d0f/interface_m_i_k_m_i_d_i_event_with_destination.html#ad1db1bc0e024f394e8d17f7624bd0165">event</a> &amp;&amp; <a class="code" href="../../dd/d0f/interface_m_i_k_m_i_d_i_event_with_destination.html#ad1db1bc0e024f394e8d17f7624bd0165">event</a>.<a class="code" href="../../d0/d2f/interface_m_i_k_m_i_d_i_event.html#a0f557d5400fc2e41ba93879737e041b6">timeStamp</a> &lt;= clickTimeStamp) {</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;            timeSignature = (<a class="code" href="../../d9/d16/struct_m_i_k_m_i_d_i_time_signature.html">MIKMIDITimeSignature</a>) { .<a class="code" href="../../d9/d16/struct_m_i_k_m_i_d_i_time_signature.html#a6dfcdae2e5c313b9bde086d6fe0c9fb6">numerator</a> = <span class="keyword">event</span>.numerator, .denominator = <span class="keyword">event</span>.denominator };</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;            [timeSignatureEvents removeObjectAtIndex:0];</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;        }</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160; </div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;        <span class="keywordflow">if</span> (clickTimeStamp &gt;= fromTimeStamp) {  <span class="comment">// ignore if clickTimeStamp is still less than fromTimeStamp (from being floored)</span></div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;            NSInteger adjustedTimeStamp = clickTimeStamp * timeSignature.<a class="code" href="../../d9/d16/struct_m_i_k_m_i_d_i_time_signature.html#a83b1078afa74b6a31f0bab7511e2d19f">denominator</a> / 4.0;</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;            BOOL isTick = !((adjustedTimeStamp + timeSignature.numerator) % (timeSignature.numerator));</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;            MIDINoteMessage clickMessage = isTick ? tickMessage : tockMessage;</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;            <a class="code" href="../../d7/d3c/interface_m_i_k_m_i_d_i_note_event.html">MIKMIDINoteEvent</a> *noteEvent = [<a class="code" href="../../d7/d3c/interface_m_i_k_m_i_d_i_note_event.html">MIKMIDINoteEvent</a> <a class="code" href="../../d7/d3c/interface_m_i_k_m_i_d_i_note_event.html#a6ead36f5df8d42720689077063b52448">noteEventWithTimeStamp</a>:clickTimeStamp <a class="code" href="../../d7/d3c/interface_m_i_k_m_i_d_i_note_event.html#a6ead36f5df8d42720689077063b52448">message</a>:clickMessage];</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;            [clickEvents addObject:[<a class="code" href="../../dd/d0f/interface_m_i_k_m_i_d_i_event_with_destination.html">MIKMIDIEventWithDestination</a> eventWithDestination:metronome event:noteEvent]];</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;        }</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160; </div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;        clickTimeStamp += 4.0 / timeSignature.denominator;</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    }</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160; </div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <span class="keywordflow">return</span> clickEvents;</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;}</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160; </div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;<span class="preprocessor">#pragma mark - Loop Points</span></div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160; </div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;- (void)setLoopStartTimeStamp:(MusicTimeStamp)loopStartTimeStamp endTimeStamp:(MusicTimeStamp)loopEndTimeStamp</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;{</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a8aecec6c365cebbf42cead88d499a126">loopEndTimeStamp</a> != <a class="code" href="../../d4/ddf/_m_i_k_m_i_d_i_sequencer_8m.html#a756b3ad1167b608698a2ab882fd68267">MIKMIDISequencerEndOfSequenceLoopEndTimeStamp</a> &amp;&amp; (<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a03c6b737d11d6237d3a014e773c25634">loopStartTimeStamp</a> &gt;= <a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a8aecec6c365cebbf42cead88d499a126">loopEndTimeStamp</a>)) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160; </div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    [<span class="keyword">self</span> dispatchSyncToProcessingQueueAsNeeded:^{</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;        [<span class="keyword">self</span> willChangeValueForKey:@&quot;loopStartTimeStamp&quot;];</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;        [<span class="keyword">self</span> willChangeValueForKey:@&quot;loopEndTimeStamp&quot;];</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160; </div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        self-&gt;_loopStartTimeStamp = loopStartTimeStamp;</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;        self-&gt;_loopEndTimeStamp = loopEndTimeStamp;</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160; </div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;        [<span class="keyword">self</span> didChangeValueForKey:@&quot;loopStartTimeStamp&quot;];</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;        [<span class="keyword">self</span> didChangeValueForKey:@&quot;loopEndTimeStamp&quot;];</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    }];</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;}</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160; </div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;<span class="preprocessor">#pragma mark - Timer</span></div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160; </div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;- (void)processingTimerFired:(NSTimer *)timer</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;{</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    [<span class="keyword">self</span> processSequenceStartingFromMIDITimeStamp:self.latestScheduledMIDITimeStamp + 1];</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;}</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160; </div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;<span class="preprocessor">#pragma mark - KVO</span></div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160; </div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;+ (BOOL)<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#ac11c8020dc32d882eab66f8c268c8f03">automaticallyNotifiesObserversOfSequence</a> { <span class="keywordflow">return</span> NO; }</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;+ (NSSet *)<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a6afd39111086eeb24aad8444402a548c">keyPathsForValuesAffectingEffectiveLoopEndTimeStamp</a> { <span class="keywordflow">return</span> [NSSet setWithObjects:@&quot;loopEndTimeStamp&quot;, @&quot;sequence.length&quot;, nil]; }</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160; </div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(<span class="keywordtype">id</span>)object change:(NSDictionary *)change context:(<span class="keywordtype">void</span> *)context</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;{</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    NSSet *currentTracks = [NSSet setWithArray:self.sequence.tracks];</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160; </div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    NSMapTable *tracksToDestinationMap = <span class="keyword">self</span>.tracksToDestinationsMap;</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    NSMutableSet *tracksToRemoveFromDestinationMap = [NSMutableSet setWithArray:[[tracksToDestinationMap keyEnumerator] allObjects]];</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    [tracksToRemoveFromDestinationMap minusSet:currentTracks];</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160; </div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../db/dce/interface_m_i_k_m_i_d_i_track.html">MIKMIDITrack</a> *track in tracksToRemoveFromDestinationMap) {</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;        [tracksToDestinationMap removeObjectForKey:track];</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    }</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160; </div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    NSMapTable *tracksToSynthsMap = <span class="keyword">self</span>.tracksToDefaultSynthsMap;</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    NSMutableSet *tracksToRemoveFromSynthsMap = [NSMutableSet setWithArray:[[tracksToSynthsMap keyEnumerator] allObjects]];</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    [tracksToRemoveFromSynthsMap minusSet:currentTracks];</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160; </div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../db/dce/interface_m_i_k_m_i_d_i_track.html">MIKMIDITrack</a> *track in tracksToRemoveFromSynthsMap) {</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;        [tracksToSynthsMap removeObjectForKey:track];</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    }</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;}</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160; </div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;<span class="preprocessor">#pragma mark - Properties</span></div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160; </div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;<span class="keyword">@synthesize</span> <a class="code" href="../../d1/d6d/_m_i_k_m_i_d_i_player_8h.html#aa83081c9071d18e2d012d960eab8b1ed">currentTimeStamp</a> = _currentTimeStamp;</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;- (MusicTimeStamp)<a class="code" href="../../d1/d6d/_m_i_k_m_i_d_i_player_8h.html#aa83081c9071d18e2d012d960eab8b1ed">currentTimeStamp</a></div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;{</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    <a class="code" href="../../d0/d11/interface_m_i_k_m_i_d_i_clock.html">MIKMIDIClock</a> *<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a280b5699f9025565d35d2e7382cb8937">clock</a> = <span class="keyword">self</span>.<a class="code" href="../../d0/d11/interface_m_i_k_m_i_d_i_clock.html#a761544a04fca337fe8a5cfd6d82ef493">clock</a>;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a280b5699f9025565d35d2e7382cb8937">clock</a>.isReady) {</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        MusicTimeStamp timeStamp = [clock <a class="code" href="../../d0/d11/interface_m_i_k_m_i_d_i_clock.html#a56905a8c9fa7777a15f6cee6c3e3beb7">musicTimeStampForMIDITimeStamp</a>:MIKMIDIGetCurrentTimeStamp()];</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;        _currentTimeStamp = MAX(((timeStamp &lt;= <span class="keyword">self</span>.<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#aadf30b839f27d048cbad1a59d6961500">sequenceLength</a>) ? timeStamp : <span class="keyword">self</span>.<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#aadf30b839f27d048cbad1a59d6961500">sequenceLength</a>), <span class="keyword">self</span>.<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#af2bbc8b3ac58108540a5c51dbabc58e7">startingTimeStamp</a>);</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    }</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    <span class="keywordflow">return</span> _currentTimeStamp;</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;}</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160; </div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;- (void)setCurrentTimeStamp:(MusicTimeStamp)currentTimeStamp</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;{</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">self</span>.<a class="code" href="../../d1/d6d/_m_i_k_m_i_d_i_player_8h.html#a7238591466f34a690890ccdeea490770">isPlaying</a>) {</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;        BOOL isRecording = <span class="keyword">self</span>.isRecording;</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;        [<span class="keyword">self</span> stop];</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;        <span class="keywordflow">if</span> (isRecording) [<span class="keyword">self</span> prepareForRecordingWithPreRoll:NO];</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;        [<span class="keyword">self</span> startPlaybackAtTimeStamp:currentTimeStamp adjustForPreRollWhenRecording:NO];</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;        _currentTimeStamp = <a class="code" href="../../d1/d6d/_m_i_k_m_i_d_i_player_8h.html#aa83081c9071d18e2d012d960eab8b1ed">currentTimeStamp</a>;</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    }</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;}</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160; </div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;- (MusicTimeStamp)<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a16a8afb7cc3e414417ccf7a887db9499">effectiveLoopEndTimeStamp</a></div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;{</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    <span class="keywordflow">return</span> (_loopEndTimeStamp &lt; 0) ? <span class="keyword">self</span>.sequenceLength : _loopEndTimeStamp;</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;}</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160; </div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;- (void)setPreRoll:(MusicTimeStamp)preRoll</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;{</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    _preRoll = (<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#ad604e1615b7bd4576487a2a469a25f84">preRoll</a> &gt;= 0) ? <a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#ad604e1615b7bd4576487a2a469a25f84">preRoll</a> : 0;</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;}</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160; </div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;- (void)setProcessingTimer:(dispatch_source_t)processingTimer</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;{</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    <span class="keywordflow">if</span> (_processingTimer != <a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#acddcf0efd24e2eda128d7756394636f4">processingTimer</a>) {</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;        <span class="keywordflow">if</span> (_processingTimer) {</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;            dispatch_source_cancel(_processingTimer);</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;        }</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;        _processingTimer = <a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#acddcf0efd24e2eda128d7756394636f4">processingTimer</a>;</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    }</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;}</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160; </div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;<span class="keyword">@synthesize</span> <a class="code" href="../../d1/d6d/_m_i_k_m_i_d_i_player_8h.html#a2f7a552a2b5379be73e8927355587c79">metronome</a> = _metronome;</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;- (<a class="code" href="../../d6/da1/interface_m_i_k_m_i_d_i_metronome.html">MIKMIDIMetronome</a> *)<a class="code" href="../../d1/d6d/_m_i_k_m_i_d_i_player_8h.html#a2f7a552a2b5379be73e8927355587c79">metronome</a></div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;{</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;<span class="preprocessor">#if (TARGET_OS_IPHONE &amp;&amp; __IPHONE_OS_VERSION_MAX_ALLOWED &gt;= __IPHONE_8_0) || !TARGET_OS_IPHONE</span></div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    <span class="keywordflow">if</span> (!_metronome) _metronome = [[<a class="code" href="../../d6/da1/interface_m_i_k_m_i_d_i_metronome.html">MIKMIDIMetronome</a> alloc] initWithError:NULL];</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    <span class="keywordflow">return</span> _metronome;</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    <span class="keywordflow">return</span> nil;</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;}</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160; </div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;- (void)setTempo:(Float64)tempo</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;{</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a98ee6a37a982195d818523d7f09d1a88">tempo</a> &lt; 0) <a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a98ee6a37a982195d818523d7f09d1a88">tempo</a> = 0;</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    <span class="keywordflow">if</span> (_tempo != <a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a98ee6a37a982195d818523d7f09d1a88">tempo</a>) {</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;        _tempo = <a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a98ee6a37a982195d818523d7f09d1a88">tempo</a>;</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">self</span>.<a class="code" href="../../d1/d6d/_m_i_k_m_i_d_i_player_8h.html#a7238591466f34a690890ccdeea490770">isPlaying</a>) <span class="keyword">self</span>.needsCurrentTempoUpdate = YES;</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    }</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;}</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160; </div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;- (MusicTimeStamp)<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#aadf30b839f27d048cbad1a59d6961500">sequenceLength</a></div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;{</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    MusicTimeStamp length = <span class="keyword">self</span>.overriddenSequenceLength;</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    <span class="keywordflow">return</span> length ? length : <span class="keyword">self</span>.sequence.length;</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;}</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160; </div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;- (void)setSequence:(<a class="code" href="../../dd/d88/interface_m_i_k_m_i_d_i_sequence.html">MIKMIDISequence</a> *)sequence</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;{</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    <span class="keywordflow">if</span> (_sequence != <a class="code" href="../../d1/d6d/_m_i_k_m_i_d_i_player_8h.html#a778959c6924aa58e80aaddfdc7f20fdd">sequence</a>) {</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;        [<span class="keyword">self</span> dispatchSyncToProcessingQueueAsNeeded:^{</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;            [<span class="keyword">self</span> willChangeValueForKey:@&quot;sequence&quot;];</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;            [<span class="keyword">self</span>-&gt;_sequence removeObserver:self forKeyPath:@&quot;tracks&quot;];</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160; </div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;            if (self-&gt;_sequence.sequencer == self) self-&gt;_sequence.sequencer = nil;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;            self-&gt;_sequence = sequence;</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;            self-&gt;_sequence.sequencer = self;</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160; </div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;            [<span class="keyword">self</span>-&gt;_sequence addObserver:self forKeyPath:@&quot;tracks&quot; options:NSKeyValueObservingOptionInitial context:NULL];</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;            [<span class="keyword">self</span> didChangeValueForKey:@&quot;sequence&quot;];</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;        }];</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    }</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;}</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160; </div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;- (void)setMaximumLookAheadInterval:(NSTimeInterval)maximumLookAheadInterval</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;{</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    _maximumLookAheadInterval = MIN(MAX(<a class="code" href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#ad0d8cd85164dfee28483297808e71031">maximumLookAheadInterval</a>, 0.05), 1.0);</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;}</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160; </div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;<span class="preprocessor">#pragma mark - Deprecated</span></div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160; </div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;- (void)setDestinationEndpoint:(<a class="code" href="../../d7/d03/interface_m_i_k_m_i_d_i_destination_endpoint.html">MIKMIDIDestinationEndpoint</a> *)endpoint forTrack:(<a class="code" href="../../db/dce/interface_m_i_k_m_i_d_i_track.html">MIKMIDITrack</a> *)track</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;{</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;    [<span class="keyword">self</span> setCommandScheduler:endpoint forTrack:track];</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;}</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160; </div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;- (<a class="code" href="../../d7/d03/interface_m_i_k_m_i_d_i_destination_endpoint.html">MIKMIDIDestinationEndpoint</a> *)destinationEndpointForTrack:(<a class="code" href="../../db/dce/interface_m_i_k_m_i_d_i_track.html">MIKMIDITrack</a> *)track</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;{</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    id&lt;MIKMIDICommandScheduler&gt; commandScheduler = [<span class="keyword">self</span> commandSchedulerForTrack:track];</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    <span class="keywordflow">return</span> [commandScheduler isKindOfClass:[<a class="code" href="../../d7/d03/interface_m_i_k_m_i_d_i_destination_endpoint.html">MIKMIDIDestinationEndpoint</a> class]] ? commandScheduler : nil;</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;}</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160; </div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;<span class="keyword">@end</span></div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160; </div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160; </div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;<span class="preprocessor">#pragma mark -</span></div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;<span class="keyword">@implementation </span><a class="code" href="../../da/de4/category_m_i_k_m_i_d_i_sequencer_07_m_i_k_m_i_d_i_private_08.html">MIKMIDISequencer (MIKMIDIPrivate)</a></div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160; </div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;- (void)dispatchSyncToProcessingQueueAsNeeded:(<span class="keywordtype">void</span> (^)(<span class="keywordtype">void</span>))block</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;{</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    <span class="keywordflow">if</span> (!block) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160; </div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    dispatch_queue_t processingQueue = <span class="keyword">self</span>.processingQueue;</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    <span class="keywordflow">if</span> (processingQueue &amp;&amp; dispatch_get_specific(_processingQueueKey) != _processingQueueContext) {</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;        dispatch_sync(processingQueue, block);</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;        block();</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    }</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;}</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160; </div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;<span class="keyword">@end</span></div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160; </div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160; </div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;<span class="preprocessor">#pragma mark -</span></div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;<span class="keyword">@implementation </span><a class="code" href="../../dd/d0f/interface_m_i_k_m_i_d_i_event_with_destination.html">MIKMIDIEventWithDestination</a></div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160; </div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;+ (instancetype)eventWithDestination:(<span class="keywordtype">id</span>&lt;<a class="code" href="../../da/d84/protocol_m_i_k_m_i_d_i_command_scheduler-p.html">MIKMIDICommandScheduler</a>&gt;)destination event:(<a class="code" href="../../d0/d2f/interface_m_i_k_m_i_d_i_event.html">MIKMIDIEvent</a> *)event</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;{</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    <span class="keywordflow">return</span> [<span class="keyword">self</span> eventWithDestination:destination event:event representsNoteOff:NO];</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;}</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160; </div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;+ (instancetype)eventWithDestination:(<span class="keywordtype">id</span>&lt;<a class="code" href="../../da/d84/protocol_m_i_k_m_i_d_i_command_scheduler-p.html">MIKMIDICommandScheduler</a>&gt;)destination event:(<a class="code" href="../../d0/d2f/interface_m_i_k_m_i_d_i_event.html">MIKMIDIEvent</a> *)event representsNoteOff:(BOOL)representsNoteOff</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;{</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    <a class="code" href="../../dd/d0f/interface_m_i_k_m_i_d_i_event_with_destination.html">MIKMIDIEventWithDestination</a> *destinationEvent = [[<span class="keyword">self</span> alloc] init];</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    destinationEvent-&gt;_event = <a class="code" href="../../dd/d0f/interface_m_i_k_m_i_d_i_event_with_destination.html#ad1db1bc0e024f394e8d17f7624bd0165">event</a>;</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;    destinationEvent-&gt;_destination = <a class="code" href="../../dd/d0f/interface_m_i_k_m_i_d_i_event_with_destination.html#ae94caeac576376d5922ab62eafd5702d">destination</a>;</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;    destinationEvent-&gt;_representsNoteOff = <a class="code" href="../../dd/d0f/interface_m_i_k_m_i_d_i_event_with_destination.html#a6645fda9e26e19942158f1199c3c81f8">representsNoteOff</a>;</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    <span class="keywordflow">return</span> destinationEvent;</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;}</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160; </div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;<span class="keyword">@end</span></div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160; </div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160; </div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;<span class="keyword">@implementation </span><a class="code" href="../../d4/d4f/interface_m_i_k_m_i_d_i_command_with_destination.html">MIKMIDICommandWithDestination</a></div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160; </div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;+ (instancetype)commandWithDestination:(<span class="keywordtype">id</span>&lt;<a class="code" href="../../da/d84/protocol_m_i_k_m_i_d_i_command_scheduler-p.html">MIKMIDICommandScheduler</a>&gt;)destination command:(<a class="code" href="../../d4/daa/interface_m_i_k_m_i_d_i_command.html">MIKMIDICommand</a> *)command</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;{</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;    <a class="code" href="../../d4/d4f/interface_m_i_k_m_i_d_i_command_with_destination.html">MIKMIDICommandWithDestination</a> *destinationCommand = [[<span class="keyword">self</span> alloc] init];</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    destinationCommand-&gt;_destination = <a class="code" href="../../dd/d0f/interface_m_i_k_m_i_d_i_event_with_destination.html#ae94caeac576376d5922ab62eafd5702d">destination</a>;</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    destinationCommand-&gt;_command = <a class="code" href="../../d4/d4f/interface_m_i_k_m_i_d_i_command_with_destination.html#a058ac1cfbff1856525f935e800539d4f">command</a>;</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    <span class="keywordflow">return</span> destinationCommand;</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;}</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160; </div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;<span class="keyword">@end</span></div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160; </div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160; </div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;<span class="keyword">@implementation </span><a class="code" href="../../d9/d75/interface_m_i_k_m_i_d_i_pending_note_offs_for_time_stamp.html">MIKMIDIPendingNoteOffsForTimeStamp</a></div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160; </div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;+ (instancetype)pendingNoteOffWithEndTimeStamp:(MusicTimeStamp)endTimeStamp</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;{</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;    <a class="code" href="../../d9/d75/interface_m_i_k_m_i_d_i_pending_note_offs_for_time_stamp.html">MIKMIDIPendingNoteOffsForTimeStamp</a> *noteOff = [[<span class="keyword">self</span> alloc] init];</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    noteOff-&gt;_endTimeStamp = <a class="code" href="../../d9/d75/interface_m_i_k_m_i_d_i_pending_note_offs_for_time_stamp.html#a44ab7db1462b9040fe6e4da32eee56f6">endTimeStamp</a>;</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    <span class="keywordflow">return</span> noteOff;</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;}</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160; </div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;- (NSMutableArray *)<a class="code" href="../../d9/d75/interface_m_i_k_m_i_d_i_pending_note_offs_for_time_stamp.html#af02dee145a2c5e79c756b90178831292">noteEventsWithEndTimeStamp</a></div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;{</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    <span class="keywordflow">if</span> (!_noteEventsWithEndTimeStamp) _noteEventsWithEndTimeStamp = [NSMutableArray array];</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    <span class="keywordflow">return</span> _noteEventsWithEndTimeStamp;</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;}</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160; </div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;<span class="keyword">@end</span></div>
<div class="ttc" id="a_m_i_k_m_i_d_i_channel_event_8h_html"><div class="ttname"><a href="../../d8/ddf/_m_i_k_m_i_d_i_channel_event_8h.html">MIKMIDIChannelEvent.h</a></div></div>
<div class="ttc" id="a_m_i_k_m_i_d_i_clock_8h_html"><div class="ttname"><a href="../../d2/d4c/_m_i_k_m_i_d_i_clock_8h.html">MIKMIDIClock.h</a></div></div>
<div class="ttc" id="a_m_i_k_m_i_d_i_clock_8h_html_a55a94b39e580083b6f1c036f433af05b"><div class="ttname"><a href="../../d2/d4c/_m_i_k_m_i_d_i_clock_8h.html#a55a94b39e580083b6f1c036f433af05b">MIKMIDIClockMIDITimeStampsPerTimeInterval</a></div><div class="ttdeci">Float64 MIKMIDIClockMIDITimeStampsPerTimeInterval(NSTimeInterval timeInterval)</div></div>
<div class="ttc" id="a_m_i_k_m_i_d_i_command_scheduler_8h_html"><div class="ttname"><a href="../../d7/ddc/_m_i_k_m_i_d_i_command_scheduler_8h.html">MIKMIDICommandScheduler.h</a></div></div>
<div class="ttc" id="a_m_i_k_m_i_d_i_control_change_command_8h_html"><div class="ttname"><a href="../../da/dc8/_m_i_k_m_i_d_i_control_change_command_8h.html">MIKMIDIControlChangeCommand.h</a></div></div>
<div class="ttc" id="a_m_i_k_m_i_d_i_control_change_event_8h_html"><div class="ttname"><a href="../../dd/da3/_m_i_k_m_i_d_i_control_change_event_8h.html">MIKMIDIControlChangeEvent.h</a></div></div>
<div class="ttc" id="a_m_i_k_m_i_d_i_destination_endpoint_8h_html"><div class="ttname"><a href="../../df/def/_m_i_k_m_i_d_i_destination_endpoint_8h.html">MIKMIDIDestinationEndpoint.h</a></div></div>
<div class="ttc" id="a_m_i_k_m_i_d_i_device_manager_8h_html"><div class="ttname"><a href="../../db/d1b/_m_i_k_m_i_d_i_device_manager_8h.html">MIKMIDIDeviceManager.h</a></div></div>
<div class="ttc" id="a_m_i_k_m_i_d_i_meta_time_signature_event_8h_html"><div class="ttname"><a href="../../da/d5a/_m_i_k_m_i_d_i_meta_time_signature_event_8h.html">MIKMIDIMetaTimeSignatureEvent.h</a></div></div>
<div class="ttc" id="a_m_i_k_m_i_d_i_metronome_8h_html"><div class="ttname"><a href="../../d4/dc8/_m_i_k_m_i_d_i_metronome_8h.html">MIKMIDIMetronome.h</a></div></div>
<div class="ttc" id="a_m_i_k_m_i_d_i_note_event_8h_html"><div class="ttname"><a href="../../d1/db3/_m_i_k_m_i_d_i_note_event_8h.html">MIKMIDINoteEvent.h</a></div></div>
<div class="ttc" id="a_m_i_k_m_i_d_i_note_off_command_8h_html"><div class="ttname"><a href="../../db/d40/_m_i_k_m_i_d_i_note_off_command_8h.html">MIKMIDINoteOffCommand.h</a></div></div>
<div class="ttc" id="a_m_i_k_m_i_d_i_note_on_command_8h_html"><div class="ttname"><a href="../../d6/d8c/_m_i_k_m_i_d_i_note_on_command_8h.html">MIKMIDINoteOnCommand.h</a></div></div>
<div class="ttc" id="a_m_i_k_m_i_d_i_player_8h_html_a04ba35ebb81d17ae6690ef4331a2449d"><div class="ttname"><a href="../../d1/d6d/_m_i_k_m_i_d_i_player_8h.html#a04ba35ebb81d17ae6690ef4331a2449d">stopPlayback</a></div><div class="ttdeci">void stopPlayback</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6d/_m_i_k_m_i_d_i_player_8h_source.html#l00052">MIKMIDIPlayer.h:52</a></div></div>
<div class="ttc" id="a_m_i_k_m_i_d_i_player_8h_html_a090d3d389dfb6387baeefb2e1e938059"><div class="ttname"><a href="../../d1/d6d/_m_i_k_m_i_d_i_player_8h.html#a090d3d389dfb6387baeefb2e1e938059">resumePlayback</a></div><div class="ttdeci">void resumePlayback</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6d/_m_i_k_m_i_d_i_player_8h_source.html#l00047">MIKMIDIPlayer.h:47</a></div></div>
<div class="ttc" id="a_m_i_k_m_i_d_i_player_8h_html_a2f7a552a2b5379be73e8927355587c79"><div class="ttname"><a href="../../d1/d6d/_m_i_k_m_i_d_i_player_8h.html#a2f7a552a2b5379be73e8927355587c79">metronome</a></div><div class="ttdeci">MIKMIDIMetronome * metronome</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6d/_m_i_k_m_i_d_i_player_8h_source.html#l00086">MIKMIDIPlayer.h:86</a></div></div>
<div class="ttc" id="a_m_i_k_m_i_d_i_player_8h_html_a7238591466f34a690890ccdeea490770"><div class="ttname"><a href="../../d1/d6d/_m_i_k_m_i_d_i_player_8h.html#a7238591466f34a690890ccdeea490770">isPlaying</a></div><div class="ttdeci">BOOL isPlaying</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6d/_m_i_k_m_i_d_i_player_8h_source.html#l00075">MIKMIDIPlayer.h:75</a></div></div>
<div class="ttc" id="a_m_i_k_m_i_d_i_player_8h_html_a778959c6924aa58e80aaddfdc7f20fdd"><div class="ttname"><a href="../../d1/d6d/_m_i_k_m_i_d_i_player_8h.html#a778959c6924aa58e80aaddfdc7f20fdd">sequence</a></div><div class="ttdeci">MIKMIDISequence * sequence</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6d/_m_i_k_m_i_d_i_player_8h_source.html#l00059">MIKMIDIPlayer.h:59</a></div></div>
<div class="ttc" id="a_m_i_k_m_i_d_i_player_8h_html_aa83081c9071d18e2d012d960eab8b1ed"><div class="ttname"><a href="../../d1/d6d/_m_i_k_m_i_d_i_player_8h.html#aa83081c9071d18e2d012d960eab8b1ed">currentTimeStamp</a></div><div class="ttdeci">MusicTimeStamp currentTimeStamp</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6d/_m_i_k_m_i_d_i_player_8h_source.html#l00064">MIKMIDIPlayer.h:64</a></div></div>
<div class="ttc" id="a_m_i_k_m_i_d_i_player_8h_html_afb9cfcbd0156d614a95235b9f5b0b525"><div class="ttname"><a href="../../d1/d6d/_m_i_k_m_i_d_i_player_8h.html#afb9cfcbd0156d614a95235b9f5b0b525">looping</a></div><div class="ttdeci">BOOL looping</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6d/_m_i_k_m_i_d_i_player_8h_source.html#l00083">MIKMIDIPlayer.h:83</a></div></div>
<div class="ttc" id="a_m_i_k_m_i_d_i_sequence_09_m_i_k_m_i_d_i_private_8h_html"><div class="ttname"><a href="../../dc/d01/_m_i_k_m_i_d_i_sequence_09_m_i_k_m_i_d_i_private_8h.html">MIKMIDISequence+MIKMIDIPrivate.h</a></div></div>
<div class="ttc" id="a_m_i_k_m_i_d_i_sequence_8h_html"><div class="ttname"><a href="../../de/dab/_m_i_k_m_i_d_i_sequence_8h.html">MIKMIDISequence.h</a></div></div>
<div class="ttc" id="a_m_i_k_m_i_d_i_sequencer_09_m_i_k_m_i_d_i_private_8h_html"><div class="ttname"><a href="../../db/d4f/_m_i_k_m_i_d_i_sequencer_09_m_i_k_m_i_d_i_private_8h.html">MIKMIDISequencer+MIKMIDIPrivate.h</a></div></div>
<div class="ttc" id="a_m_i_k_m_i_d_i_sequencer_8h_html"><div class="ttname"><a href="../../d3/d43/_m_i_k_m_i_d_i_sequencer_8h.html">MIKMIDISequencer.h</a></div></div>
<div class="ttc" id="a_m_i_k_m_i_d_i_sequencer_8m_html_a676be339e7cde9f2d054f2c835d3b188"><div class="ttname"><a href="../../d4/ddf/_m_i_k_m_i_d_i_sequencer_8m.html#a676be339e7cde9f2d054f2c835d3b188">MIKMIDISequencerWillLoopNotification</a></div><div class="ttdeci">NSString *const MIKMIDISequencerWillLoopNotification</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/_m_i_k_m_i_d_i_sequencer_8m_source.html#l00038">MIKMIDISequencer.m:38</a></div></div>
<div class="ttc" id="a_m_i_k_m_i_d_i_sequencer_8m_html_a6abff4b7df1a05343503b3eda229dc87"><div class="ttname"><a href="../../d4/ddf/_m_i_k_m_i_d_i_sequencer_8m.html#a6abff4b7df1a05343503b3eda229dc87">kDefaultTempo</a></div><div class="ttdeci">#define kDefaultTempo</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/_m_i_k_m_i_d_i_sequencer_8m_source.html#l00036">MIKMIDISequencer.m:36</a></div></div>
<div class="ttc" id="a_m_i_k_m_i_d_i_sequencer_8m_html_a756b3ad1167b608698a2ab882fd68267"><div class="ttname"><a href="../../d4/ddf/_m_i_k_m_i_d_i_sequencer_8m.html#a756b3ad1167b608698a2ab882fd68267">MIKMIDISequencerEndOfSequenceLoopEndTimeStamp</a></div><div class="ttdeci">const MusicTimeStamp MIKMIDISequencerEndOfSequenceLoopEndTimeStamp</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/_m_i_k_m_i_d_i_sequencer_8m_source.html#l00039">MIKMIDISequencer.m:39</a></div></div>
<div class="ttc" id="a_m_i_k_m_i_d_i_synthesizer_8h_html"><div class="ttname"><a href="../../dd/d56/_m_i_k_m_i_d_i_synthesizer_8h.html">MIKMIDISynthesizer.h</a></div></div>
<div class="ttc" id="a_m_i_k_m_i_d_i_tempo_event_8h_html"><div class="ttname"><a href="../../d9/d8a/_m_i_k_m_i_d_i_tempo_event_8h.html">MIKMIDITempoEvent.h</a></div></div>
<div class="ttc" id="a_m_i_k_m_i_d_i_track_8h_html"><div class="ttname"><a href="../../d1/dd9/_m_i_k_m_i_d_i_track_8h.html">MIKMIDITrack.h</a></div></div>
<div class="ttc" id="a_m_i_k_m_i_d_i_utilities_8h_html"><div class="ttname"><a href="../../da/d38/_m_i_k_m_i_d_i_utilities_8h.html">MIKMIDIUtilities.h</a></div></div>
<div class="ttc" id="a_m_i_k_m_i_d_i_utilities_8h_html_adba1e5973777fba4873cc5e0fb8620a3"><div class="ttname"><a href="../../da/d38/_m_i_k_m_i_d_i_utilities_8h.html#adba1e5973777fba4873cc5e0fb8620a3">MIKMIDIGetCurrentTimeStamp</a></div><div class="ttdeci">MIDITimeStamp MIKMIDIGetCurrentTimeStamp(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dbb/_m_i_k_m_i_d_i_utilities_8m_source.html#l00153">MIKMIDIUtilities.m:153</a></div></div>
<div class="ttc" id="acategory_m_i_k_m_i_d_i_sequencer_07_m_i_k_m_i_d_i_private_08_html"><div class="ttname"><a href="../../da/de4/category_m_i_k_m_i_d_i_sequencer_07_m_i_k_m_i_d_i_private_08.html">MIKMIDISequencer(MIKMIDIPrivate)</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d4f/_m_i_k_m_i_d_i_sequencer_09_m_i_k_m_i_d_i_private_8h_source.html#l00014">MIKMIDISequencer+MIKMIDIPrivate.h:14</a></div></div>
<div class="ttc" id="aclass_n_s_object_html"><div class="ttname"><a href="../../d7/dc4/class_n_s_object.html">NSObject</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_channel_event_html"><div class="ttname"><a href="../../d7/de9/interface_m_i_k_m_i_d_i_channel_event.html">MIKMIDIChannelEvent</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/ddf/_m_i_k_m_i_d_i_channel_event_8h_source.html#l00014">MIKMIDIChannelEvent.h:15</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_channel_voice_command_html_a46fb2f2b0fb56a5c345ac4291c95a90f"><div class="ttname"><a href="../../db/dca/interface_m_i_k_m_i_d_i_channel_voice_command.html#a46fb2f2b0fb56a5c345ac4291c95a90f">MIKMIDIChannelVoiceCommand::channel</a></div><div class="ttdeci">UInt8 channel</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d84/_m_i_k_m_i_d_i_channel_voice_command_8h_source.html#l00026">MIKMIDIChannelVoiceCommand.h:26</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_clock_html"><div class="ttname"><a href="../../d0/d11/interface_m_i_k_m_i_d_i_clock.html">MIKMIDIClock</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4c/_m_i_k_m_i_d_i_clock_8h_source.html#l00038">MIKMIDIClock.h:39</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_clock_html_a3b148aafbd4332f081d15fb7872819a6"><div class="ttname"><a href="../../d0/d11/interface_m_i_k_m_i_d_i_clock.html#a3b148aafbd4332f081d15fb7872819a6">-[MIKMIDIClock unsyncMusicTimeStampsAndTemposFromMIDITimeStamps]</a></div><div class="ttdeci">void unsyncMusicTimeStampsAndTemposFromMIDITimeStamps()</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d31/_m_i_k_m_i_d_i_clock_8m_source.html#l00094">MIKMIDIClock.m:192</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_clock_html_a56905a8c9fa7777a15f6cee6c3e3beb7"><div class="ttname"><a href="../../d0/d11/interface_m_i_k_m_i_d_i_clock.html#a56905a8c9fa7777a15f6cee6c3e3beb7">-[MIKMIDIClock musicTimeStampForMIDITimeStamp:]</a></div><div class="ttdeci">MusicTimeStamp musicTimeStampForMIDITimeStamp:(MIDITimeStamp midiTimeStamp)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d31/_m_i_k_m_i_d_i_clock_8m_source.html#l00204">MIKMIDIClock.m:222</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_clock_html_a761544a04fca337fe8a5cfd6d82ef493"><div class="ttname"><a href="../../d0/d11/interface_m_i_k_m_i_d_i_clock.html#a761544a04fca337fe8a5cfd6d82ef493">+[MIKMIDIClock clock]</a></div><div class="ttdeci">instancetype clock()</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d31/_m_i_k_m_i_d_i_clock_8m_source.html#l00046">MIKMIDIClock.m:56</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_clock_html_a90926beed6a3c7efcb1cb536b25361b0"><div class="ttname"><a href="../../d0/d11/interface_m_i_k_m_i_d_i_clock.html#a90926beed6a3c7efcb1cb536b25361b0">-[MIKMIDIClock midiTimeStampForMusicTimeStamp:]</a></div><div class="ttdeci">MIDITimeStamp midiTimeStampForMusicTimeStamp:(MusicTimeStamp musicTimeStamp)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d31/_m_i_k_m_i_d_i_clock_8m_source.html#l00234">MIKMIDIClock.m:262</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_command_html"><div class="ttname"><a href="../../d4/daa/interface_m_i_k_m_i_d_i_command.html">MIKMIDICommand</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d98/_m_i_k_m_i_d_i_command_8h_source.html#l00109">MIKMIDICommand.h:109</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_command_html_a9351c27d026d087fe9e5c8851ca0436d"><div class="ttname"><a href="../../d4/daa/interface_m_i_k_m_i_d_i_command.html#a9351c27d026d087fe9e5c8851ca0436d">+[MIKMIDICommand commandFromChannelEvent:clock:]</a></div><div class="ttdeci">nullable instancetype commandFromChannelEvent:clock:(MIKMIDIChannelEvent *event,[clock] MIKMIDIClock *clock)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d75/_m_i_k_m_i_d_i_channel_event_8m_source.html#l00022">MIKMIDIChannelEvent.m:114</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_command_html_aa9f25080f519483681644189571ad77b"><div class="ttname"><a href="../../d4/daa/interface_m_i_k_m_i_d_i_command.html#aa9f25080f519483681644189571ad77b">MIKMIDICommand::midiTimestamp</a></div><div class="ttdeci">MIDITimeStamp midiTimestamp</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d98/_m_i_k_m_i_d_i_command_8h_source.html#l00203">MIKMIDICommand.h:203</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_command_html_ac728e768d83d362f15f0f1af86a9270b"><div class="ttname"><a href="../../d4/daa/interface_m_i_k_m_i_d_i_command.html#ac728e768d83d362f15f0f1af86a9270b">+[MIKMIDICommand noteOffCommandFromNoteEvent:clock:]</a></div><div class="ttdeci">MIKMIDINoteOffCommand * noteOffCommandFromNoteEvent:clock:(MIKMIDINoteEvent *noteEvent,[clock] nullable MIKMIDIClock *clock)</div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_command_html_accbd01a02766991b8b55b546ab9036bf"><div class="ttname"><a href="../../d4/daa/interface_m_i_k_m_i_d_i_command.html#accbd01a02766991b8b55b546ab9036bf">+[MIKMIDICommand noteOnCommandFromNoteEvent:clock:]</a></div><div class="ttdeci">MIKMIDINoteOnCommand * noteOnCommandFromNoteEvent:clock:(MIKMIDINoteEvent *noteEvent,[clock] nullable MIKMIDIClock *clock)</div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_command_with_destination_html"><div class="ttname"><a href="../../d4/d4f/interface_m_i_k_m_i_d_i_command_with_destination.html">MIKMIDICommandWithDestination</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/_m_i_k_m_i_d_i_sequencer_8m_source.html#l00053">MIKMIDISequencer.m:54</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_command_with_destination_html_a058ac1cfbff1856525f935e800539d4f"><div class="ttname"><a href="../../d4/d4f/interface_m_i_k_m_i_d_i_command_with_destination.html#a058ac1cfbff1856525f935e800539d4f">MIKMIDICommandWithDestination::command</a></div><div class="ttdeci">MIKMIDICommand * command</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/_m_i_k_m_i_d_i_sequencer_8m_source.html#l00054">MIKMIDISequencer.m:54</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_control_change_command_html"><div class="ttname"><a href="../../dc/d75/interface_m_i_k_m_i_d_i_control_change_command.html">MIKMIDIControlChangeCommand</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/dc8/_m_i_k_m_i_d_i_control_change_command_8h_source.html#l00017">MIKMIDIControlChangeCommand.h:18</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_control_change_command_html_a0957ba57767a95308d0ba69f4dc63347"><div class="ttname"><a href="../../dc/d75/interface_m_i_k_m_i_d_i_control_change_command.html#a0957ba57767a95308d0ba69f4dc63347">MIKMIDIControlChangeCommand::controllerNumber</a></div><div class="ttdeci">NSUInteger controllerNumber</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dc8/_m_i_k_m_i_d_i_control_change_command_8h_source.html#l00086">MIKMIDIControlChangeCommand.h:86</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_control_change_command_html_ae44d928339fd7c11b7fba3614cc62e84"><div class="ttname"><a href="../../dc/d75/interface_m_i_k_m_i_d_i_control_change_command.html#ae44d928339fd7c11b7fba3614cc62e84">MIKMIDIControlChangeCommand::controllerValue</a></div><div class="ttdeci">NSUInteger controllerValue</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dc8/_m_i_k_m_i_d_i_control_change_command_8h_source.html#l00096">MIKMIDIControlChangeCommand.h:96</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_destination_endpoint_html"><div class="ttname"><a href="../../d7/d03/interface_m_i_k_m_i_d_i_destination_endpoint.html">MIKMIDIDestinationEndpoint</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/def/_m_i_k_m_i_d_i_destination_endpoint_8h_source.html#l00033">MIKMIDIDestinationEndpoint.h:33</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_event_html"><div class="ttname"><a href="../../d0/d2f/interface_m_i_k_m_i_d_i_event.html">MIKMIDIEvent</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/ddb/_m_i_k_m_i_d_i_event_8h_source.html#l00122">MIKMIDIEvent.h:122</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_event_html_a0f557d5400fc2e41ba93879737e041b6"><div class="ttname"><a href="../../d0/d2f/interface_m_i_k_m_i_d_i_event.html#a0f557d5400fc2e41ba93879737e041b6">MIKMIDIEvent::timeStamp</a></div><div class="ttdeci">MusicTimeStamp timeStamp</div><div class="ttdef"><b>Definition:</b> <a href="../../da/ddb/_m_i_k_m_i_d_i_event_8h_source.html#l00165">MIKMIDIEvent.h:165</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_event_html_a9de783028847375ed96f45ed9958c470"><div class="ttname"><a href="../../d0/d2f/interface_m_i_k_m_i_d_i_event.html#a9de783028847375ed96f45ed9958c470">MIKMIDIEvent::eventType</a></div><div class="ttdeci">MIKMIDIEventType eventType</div><div class="ttdef"><b>Definition:</b> <a href="../../da/ddb/_m_i_k_m_i_d_i_event_8h_source.html#l00159">MIKMIDIEvent.h:159</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_event_with_destination_html"><div class="ttname"><a href="../../dd/d0f/interface_m_i_k_m_i_d_i_event_with_destination.html">MIKMIDIEventWithDestination</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/_m_i_k_m_i_d_i_sequencer_8m_source.html#l00044">MIKMIDISequencer.m:45</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_event_with_destination_html_a6175664b570e32a220e3e54485238604"><div class="ttname"><a href="../../dd/d0f/interface_m_i_k_m_i_d_i_event_with_destination.html#a6175664b570e32a220e3e54485238604">+[MIKMIDIEventWithDestination eventWithDestination:event:]</a></div><div class="ttdeci">instancetype eventWithDestination:event:(id&lt; MIKMIDICommandScheduler &gt; destination,[event] MIKMIDIEvent *event)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/_m_i_k_m_i_d_i_sequencer_8m_source.html#l00098">MIKMIDISequencer.m:886</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_event_with_destination_html_a6645fda9e26e19942158f1199c3c81f8"><div class="ttname"><a href="../../dd/d0f/interface_m_i_k_m_i_d_i_event_with_destination.html#a6645fda9e26e19942158f1199c3c81f8">MIKMIDIEventWithDestination::representsNoteOff</a></div><div class="ttdeci">BOOL representsNoteOff</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/_m_i_k_m_i_d_i_sequencer_8m_source.html#l00047">MIKMIDISequencer.m:47</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_event_with_destination_html_ad1db1bc0e024f394e8d17f7624bd0165"><div class="ttname"><a href="../../dd/d0f/interface_m_i_k_m_i_d_i_event_with_destination.html#ad1db1bc0e024f394e8d17f7624bd0165">MIKMIDIEventWithDestination::event</a></div><div class="ttdeci">MIKMIDIEvent * event</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/_m_i_k_m_i_d_i_sequencer_8m_source.html#l00045">MIKMIDISequencer.m:45</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_event_with_destination_html_ae94caeac576376d5922ab62eafd5702d"><div class="ttname"><a href="../../dd/d0f/interface_m_i_k_m_i_d_i_event_with_destination.html#ae94caeac576376d5922ab62eafd5702d">MIKMIDIEventWithDestination::destination</a></div><div class="ttdeci">id&lt; MIKMIDICommandScheduler &gt; destination</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/_m_i_k_m_i_d_i_sequencer_8m_source.html#l00046">MIKMIDISequencer.m:46</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_meta_time_signature_event_html"><div class="ttname"><a href="../../d7/d3d/interface_m_i_k_m_i_d_i_meta_time_signature_event.html">MIKMIDIMetaTimeSignatureEvent</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d5a/_m_i_k_m_i_d_i_meta_time_signature_event_8h_source.html#l00045">MIKMIDIMetaTimeSignatureEvent.h:46</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_metronome_html"><div class="ttname"><a href="../../d6/da1/interface_m_i_k_m_i_d_i_metronome.html">MIKMIDIMetronome</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc8/_m_i_k_m_i_d_i_metronome_8h_source.html#l00018">MIKMIDIMetronome.h:19</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_metronome_html_a0e1005f305d6f7305636da47e7981481"><div class="ttname"><a href="../../d6/da1/interface_m_i_k_m_i_d_i_metronome.html#a0e1005f305d6f7305636da47e7981481">MIKMIDIMetronome::tickMessage</a></div><div class="ttdeci">MIDINoteMessage tickMessage</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc8/_m_i_k_m_i_d_i_metronome_8h_source.html#l00022">MIKMIDIMetronome.h:22</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_metronome_html_ae0cea330ea6d4099678274378e29e805"><div class="ttname"><a href="../../d6/da1/interface_m_i_k_m_i_d_i_metronome.html#ae0cea330ea6d4099678274378e29e805">MIKMIDIMetronome::tockMessage</a></div><div class="ttdeci">MIDINoteMessage tockMessage</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc8/_m_i_k_m_i_d_i_metronome_8h_source.html#l00023">MIKMIDIMetronome.h:23</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_note_command_html_a609d689213f42cee0ad9049718f6addd"><div class="ttname"><a href="../../d9/d0e/interface_m_i_k_m_i_d_i_note_command.html#a609d689213f42cee0ad9049718f6addd">MIKMIDINoteCommand::note</a></div><div class="ttdeci">NSUInteger note</div><div class="ttdef"><b>Definition:</b> <a href="../../db/db0/_m_i_k_m_i_d_i_note_command_8h_source.html#l00060">MIKMIDINoteCommand.h:60</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_note_command_html_af9b7fd68b2b15542788adc08c4aa4b4e"><div class="ttname"><a href="../../d9/d0e/interface_m_i_k_m_i_d_i_note_command.html#af9b7fd68b2b15542788adc08c4aa4b4e">MIKMIDINoteCommand::velocity</a></div><div class="ttdeci">NSUInteger velocity</div><div class="ttdef"><b>Definition:</b> <a href="../../db/db0/_m_i_k_m_i_d_i_note_command_8h_source.html#l00065">MIKMIDINoteCommand.h:65</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_note_event_html"><div class="ttname"><a href="../../d7/d3c/interface_m_i_k_m_i_d_i_note_event.html">MIKMIDINoteEvent</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/db3/_m_i_k_m_i_d_i_note_event_8h_source.html#l00019">MIKMIDINoteEvent.h:20</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_note_event_html_a6919d056a06189060abe7b9e10ec7748"><div class="ttname"><a href="../../d7/d3c/interface_m_i_k_m_i_d_i_note_event.html#a6919d056a06189060abe7b9e10ec7748">MIKMIDINoteEvent::releaseVelocity</a></div><div class="ttdeci">UInt8 releaseVelocity</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/db3/_m_i_k_m_i_d_i_note_event_8h_source.html#l00068">MIKMIDINoteEvent.h:68</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_note_event_html_a6ead36f5df8d42720689077063b52448"><div class="ttname"><a href="../../d7/d3c/interface_m_i_k_m_i_d_i_note_event.html#a6ead36f5df8d42720689077063b52448">+[MIKMIDINoteEvent noteEventWithTimeStamp:message:]</a></div><div class="ttdeci">instancetype noteEventWithTimeStamp:message:(MusicTimeStamp timeStamp,[message] MIDINoteMessage message)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d80/_m_i_k_m_i_d_i_note_event_8m_source.html#l00001">MIKMIDINoteEvent.m:45</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_note_event_html_a9c4204db8a4f3241243a79738b661c4e"><div class="ttname"><a href="../../d7/d3c/interface_m_i_k_m_i_d_i_note_event.html#a9c4204db8a4f3241243a79738b661c4e">MIKMIDINoteEvent::endTimeStamp</a></div><div class="ttdeci">MusicTimeStamp endTimeStamp</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/db3/_m_i_k_m_i_d_i_note_event_8h_source.html#l00078">MIKMIDINoteEvent.h:78</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_note_off_command_html"><div class="ttname"><a href="../../dc/d60/interface_m_i_k_m_i_d_i_note_off_command.html">MIKMIDINoteOffCommand</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d40/_m_i_k_m_i_d_i_note_off_command_8h_source.html#l00016">MIKMIDINoteOffCommand.h:17</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_note_off_command_html_ab9ab88fbcb2624b2c27cbce93643d0eb"><div class="ttname"><a href="../../dc/d60/interface_m_i_k_m_i_d_i_note_off_command.html#ab9ab88fbcb2624b2c27cbce93643d0eb">+[MIKMIDINoteOffCommand noteOffCommandWithNote:velocity:channel:midiTimeStamp:]</a></div><div class="ttdeci">instancetype noteOffCommandWithNote:velocity:channel:midiTimeStamp:(NSUInteger note,[velocity] NSUInteger velocity,[channel] UInt8 channel,[midiTimeStamp] MIDITimeStamp timestamp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/ddd/_m_i_k_m_i_d_i_note_off_command_8m_source.html#l00001">MIKMIDINoteOffCommand.m:33</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_note_on_command_html"><div class="ttname"><a href="../../db/db2/interface_m_i_k_m_i_d_i_note_on_command.html">MIKMIDINoteOnCommand</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d8c/_m_i_k_m_i_d_i_note_on_command_8h_source.html#l00016">MIKMIDINoteOnCommand.h:17</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_pending_note_offs_for_time_stamp_html"><div class="ttname"><a href="../../d9/d75/interface_m_i_k_m_i_d_i_pending_note_offs_for_time_stamp.html">MIKMIDIPendingNoteOffsForTimeStamp</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/_m_i_k_m_i_d_i_sequencer_8m_source.html#l00060">MIKMIDISequencer.m:61</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_pending_note_offs_for_time_stamp_html_a2b3a04f4d295477b2760e32c27ac5dcd"><div class="ttname"><a href="../../d9/d75/interface_m_i_k_m_i_d_i_pending_note_offs_for_time_stamp.html#a2b3a04f4d295477b2760e32c27ac5dcd">+[MIKMIDIPendingNoteOffsForTimeStamp pendingNoteOffWithEndTimeStamp:]</a></div><div class="ttdeci">instancetype pendingNoteOffWithEndTimeStamp:(MusicTimeStamp endTimeStamp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/_m_i_k_m_i_d_i_sequencer_8m_source.html#l00098">MIKMIDISequencer.m:918</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_pending_note_offs_for_time_stamp_html_a44ab7db1462b9040fe6e4da32eee56f6"><div class="ttname"><a href="../../d9/d75/interface_m_i_k_m_i_d_i_pending_note_offs_for_time_stamp.html#a44ab7db1462b9040fe6e4da32eee56f6">MIKMIDIPendingNoteOffsForTimeStamp::endTimeStamp</a></div><div class="ttdeci">MusicTimeStamp endTimeStamp</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/_m_i_k_m_i_d_i_sequencer_8m_source.html#l00062">MIKMIDISequencer.m:62</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_pending_note_offs_for_time_stamp_html_af02dee145a2c5e79c756b90178831292"><div class="ttname"><a href="../../d9/d75/interface_m_i_k_m_i_d_i_pending_note_offs_for_time_stamp.html#af02dee145a2c5e79c756b90178831292">MIKMIDIPendingNoteOffsForTimeStamp::noteEventsWithEndTimeStamp</a></div><div class="ttdeci">NSMutableArray * noteEventsWithEndTimeStamp</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/_m_i_k_m_i_d_i_sequencer_8m_source.html#l00061">MIKMIDISequencer.m:61</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_sequence_html"><div class="ttname"><a href="../../dd/d88/interface_m_i_k_m_i_d_i_sequence.html">MIKMIDISequence</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dab/_m_i_k_m_i_d_i_sequence_8h_source.html#l00030">MIKMIDISequence.h:31</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_sequence_html_a18fe0af4f402243d03b95a5f2f4715b9"><div class="ttname"><a href="../../dd/d88/interface_m_i_k_m_i_d_i_sequence.html#a18fe0af4f402243d03b95a5f2f4715b9">+[MIKMIDISequence sequence]</a></div><div class="ttdeci">nullable instancetype sequence()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d41/_m_i_k_m_i_d_i_sequence_8m_source.html#l00033">MIKMIDISequence.m:42</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_sequence_html_a9d1c5cc1af8f93ac2f62d797a7fd773a"><div class="ttname"><a href="../../dd/d88/interface_m_i_k_m_i_d_i_sequence.html#a9d1c5cc1af8f93ac2f62d797a7fd773a">-[MIKMIDISequence timeSignatureAtTimeStamp:]</a></div><div class="ttdeci">MIKMIDITimeSignature timeSignatureAtTimeStamp:(MusicTimeStamp timeStamp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d41/_m_i_k_m_i_d_i_sequence_8m_source.html#l00258">MIKMIDISequence.m:352</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_sequence_html_aa002aa0100e38724caf1a308a008d16a"><div class="ttname"><a href="../../dd/d88/interface_m_i_k_m_i_d_i_sequence.html#aa002aa0100e38724caf1a308a008d16a">-[MIKMIDISequence tracks]</a></div><div class="ttdeci">NSArray * tracks()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d41/_m_i_k_m_i_d_i_sequence_8m_source.html#l00258">MIKMIDISequence.m:441</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_sequence_html_ad3b5258ee9914d55e21810ea1e558d0c"><div class="ttname"><a href="../../dd/d88/interface_m_i_k_m_i_d_i_sequence.html#ad3b5258ee9914d55e21810ea1e558d0c">-[MIKMIDISequence tempoAtTimeStamp:]</a></div><div class="ttdeci">Float64 tempoAtTimeStamp:(MusicTimeStamp timeStamp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d41/_m_i_k_m_i_d_i_sequence_8m_source.html#l00258">MIKMIDISequence.m:312</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_sequencer_html"><div class="ttname"><a href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html">MIKMIDISequencer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d43/_m_i_k_m_i_d_i_sequencer_8h_source.html#l00047">MIKMIDISequencer.h:48</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_sequencer_html_a03c6b737d11d6237d3a014e773c25634"><div class="ttname"><a href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a03c6b737d11d6237d3a014e773c25634">MIKMIDISequencer::loopStartTimeStamp</a></div><div class="ttdeci">MusicTimeStamp loopStartTimeStamp</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d43/_m_i_k_m_i_d_i_sequencer_8h_source.html#l00346">MIKMIDISequencer.h:346</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_sequencer_html_a0f1fcc35a82f4f049154d5f790b29152"><div class="ttname"><a href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a0f1fcc35a82f4f049154d5f790b29152">MIKMIDISequencer::tracksToDestinationsMap</a></div><div class="ttdeci">NSMapTable * tracksToDestinationsMap</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/_m_i_k_m_i_d_i_sequencer_8m_source.html#l00090">MIKMIDISequencer.m:90</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_sequencer_html_a16a8afb7cc3e414417ccf7a887db9499"><div class="ttname"><a href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a16a8afb7cc3e414417ccf7a887db9499">MIKMIDISequencer::effectiveLoopEndTimeStamp</a></div><div class="ttdeci">MusicTimeStamp effectiveLoopEndTimeStamp</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d43/_m_i_k_m_i_d_i_sequencer_8h_source.html#l00367">MIKMIDISequencer.h:367</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_sequencer_html_a1c2862190557cf600c1c5f3063c076a7"><div class="ttname"><a href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a1c2862190557cf600c1c5f3063c076a7">MIKMIDISequencer::recording</a></div><div class="ttdeci">BOOL recording</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d43/_m_i_k_m_i_d_i_sequencer_8h_source.html#l00282">MIKMIDISequencer.h:282</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_sequencer_html_a280b5699f9025565d35d2e7382cb8937"><div class="ttname"><a href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a280b5699f9025565d35d2e7382cb8937">MIKMIDISequencer::clock</a></div><div class="ttdeci">MIKMIDIClock * clock</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/_m_i_k_m_i_d_i_sequencer_8m_source.html#l00075">MIKMIDISequencer.m:75</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_sequencer_html_a49c1e2960f74d28ab3b16126360eaf81"><div class="ttname"><a href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a49c1e2960f74d28ab3b16126360eaf81">MIKMIDISequencer::pendingRecordedNoteEvents</a></div><div class="ttdeci">NSMutableDictionary * pendingRecordedNoteEvents</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/_m_i_k_m_i_d_i_sequencer_8m_source.html#l00085">MIKMIDISequencer.m:85</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_sequencer_html_a5e7b8fbd06aa81bffc581b826901bd35"><div class="ttname"><a href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a5e7b8fbd06aa81bffc581b826901bd35">MIKMIDISequencer::_processingQueueKey</a></div><div class="ttdeci">void * _processingQueueKey</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/_m_i_k_m_i_d_i_sequencer_8m_source.html#l00071">MIKMIDISequencer.m:71</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_sequencer_html_a5eed37470d79e24efc982d816cfa1ba7"><div class="ttname"><a href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a5eed37470d79e24efc982d816cfa1ba7">MIKMIDISequencer::playing</a></div><div class="ttdeci">BOOL playing</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d43/_m_i_k_m_i_d_i_sequencer_8h_source.html#l00270">MIKMIDISequencer.h:270</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_sequencer_html_a6afd39111086eeb24aad8444402a548c"><div class="ttname"><a href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a6afd39111086eeb24aad8444402a548c">+[MIKMIDISequencer keyPathsForValuesAffectingEffectiveLoopEndTimeStamp]</a></div><div class="ttdeci">NSSet * keyPathsForValuesAffectingEffectiveLoopEndTimeStamp()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/_m_i_k_m_i_d_i_sequencer_8m_source.html#l00098">MIKMIDISequencer.m:733</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_sequencer_html_a74fd882fb2fa3476bc043b307f58947c"><div class="ttname"><a href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a74fd882fb2fa3476bc043b307f58947c">MIKMIDISequencer::_processingQueueContext</a></div><div class="ttdeci">void * _processingQueueContext</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/_m_i_k_m_i_d_i_sequencer_8m_source.html#l00072">MIKMIDISequencer.m:72</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_sequencer_html_a7c5d1de53ee71d4af6f28e1a35acf87d"><div class="ttname"><a href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a7c5d1de53ee71d4af6f28e1a35acf87d">-[MIKMIDISequencer resumeRecording]</a></div><div class="ttdeci">void resumeRecording()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/_m_i_k_m_i_d_i_sequencer_8m_source.html#l00098">MIKMIDISequencer.m:531</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_sequencer_html_a7db2d4109205d2d0395066639e33d300"><div class="ttname"><a href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a7db2d4109205d2d0395066639e33d300">MIKMIDISequencer::latestScheduledMIDITimeStamp</a></div><div class="ttdeci">MIDITimeStamp latestScheduledMIDITimeStamp</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d43/_m_i_k_m_i_d_i_sequencer_8h_source.html#l00415">MIKMIDISequencer.h:415</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_sequencer_html_a80bf74de83095b60b8f372830377cac2"><div class="ttname"><a href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a80bf74de83095b60b8f372830377cac2">-[MIKMIDISequencer stop]</a></div><div class="ttdeci">void stop()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/_m_i_k_m_i_d_i_sequencer_8m_source.html#l00098">MIKMIDISequencer.m:222</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_sequencer_html_a8495bd2936fa5e2aa93b2c7d17785f2e"><div class="ttname"><a href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a8495bd2936fa5e2aa93b2c7d17785f2e">MIKMIDISequencer::clickTrackStatus</a></div><div class="ttdeci">MIKMIDISequencerClickTrackStatus clickTrackStatus</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d43/_m_i_k_m_i_d_i_sequencer_8h_source.html#l00392">MIKMIDISequencer.h:392</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_sequencer_html_a8758a6e14c24dfdc1c94a6cd02c44e1c"><div class="ttname"><a href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a8758a6e14c24dfdc1c94a6cd02c44e1c">-[MIKMIDISequencer dealloc]</a></div><div class="ttdeci">void dealloc()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/_m_i_k_m_i_d_i_sequencer_8m_source.html#l00098">MIKMIDISequencer.m:141</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_sequencer_html_a8956a1f11ac1590aa940600b7802c950"><div class="ttname"><a href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a8956a1f11ac1590aa940600b7802c950">MIKMIDISequencer::processingQueue</a></div><div class="ttdeci">dispatch_queue_t processingQueue</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/_m_i_k_m_i_d_i_sequencer_8m_source.html#l00097">MIKMIDISequencer.m:97</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_sequencer_html_a8aecec6c365cebbf42cead88d499a126"><div class="ttname"><a href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a8aecec6c365cebbf42cead88d499a126">MIKMIDISequencer::loopEndTimeStamp</a></div><div class="ttdeci">MusicTimeStamp loopEndTimeStamp</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d43/_m_i_k_m_i_d_i_sequencer_8h_source.html#l00358">MIKMIDISequencer.h:358</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_sequencer_html_a98ee6a37a982195d818523d7f09d1a88"><div class="ttname"><a href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a98ee6a37a982195d818523d7f09d1a88">MIKMIDISequencer::tempo</a></div><div class="ttdeci">Float64 tempo</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d43/_m_i_k_m_i_d_i_sequencer_8h_source.html#l00288">MIKMIDISequencer.h:288</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_sequencer_html_a9d9a37013a0665d217c49653faa22e7c"><div class="ttname"><a href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#a9d9a37013a0665d217c49653faa22e7c">MIKMIDISequencer::pendingNoteOffs</a></div><div class="ttdeci">NSMutableDictionary * pendingNoteOffs</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/_m_i_k_m_i_d_i_sequencer_8m_source.html#l00083">MIKMIDISequencer.m:83</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_sequencer_html_aa6a7f0f4033a133bafcd0594e14d0365"><div class="ttname"><a href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#aa6a7f0f4033a133bafcd0594e14d0365">-[MIKMIDISequencer startRecording]</a></div><div class="ttdeci">void startRecording()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/_m_i_k_m_i_d_i_sequencer_8m_source.html#l00098">MIKMIDISequencer.m:513</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_sequencer_html_aa70b35d2585ca3413cd3a5d1b046f44d"><div class="ttname"><a href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#aa70b35d2585ca3413cd3a5d1b046f44d">-[MIKMIDISequencer init]</a></div><div class="ttdeci">instancetype init()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/_m_i_k_m_i_d_i_sequencer_8m_source.html#l00098">MIKMIDISequencer.m:131</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_sequencer_html_aadf30b839f27d048cbad1a59d6961500"><div class="ttname"><a href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#aadf30b839f27d048cbad1a59d6961500">-[MIKMIDISequencer sequenceLength]</a></div><div class="ttdeci">MusicTimeStamp sequenceLength()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/_m_i_k_m_i_d_i_sequencer_8m_source.html#l00098">MIKMIDISequencer.m:821</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_sequencer_html_ac11c8020dc32d882eab66f8c268c8f03"><div class="ttname"><a href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#ac11c8020dc32d882eab66f8c268c8f03">+[MIKMIDISequencer automaticallyNotifiesObserversOfSequence]</a></div><div class="ttdeci">BOOL automaticallyNotifiesObserversOfSequence()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/_m_i_k_m_i_d_i_sequencer_8m_source.html#l00098">MIKMIDISequencer.m:732</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_sequencer_html_acd319e1845e51b2e0675b4bd0dc17635"><div class="ttname"><a href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#acd319e1845e51b2e0675b4bd0dc17635">MIKMIDISequencer::initialStartingTimeStamp</a></div><div class="ttdeci">MusicTimeStamp initialStartingTimeStamp</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/_m_i_k_m_i_d_i_sequencer_8m_source.html#l00088">MIKMIDISequencer.m:88</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_sequencer_html_acddcf0efd24e2eda128d7756394636f4"><div class="ttname"><a href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#acddcf0efd24e2eda128d7756394636f4">MIKMIDISequencer::processingTimer</a></div><div class="ttdeci">dispatch_source_t processingTimer</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/_m_i_k_m_i_d_i_sequencer_8m_source.html#l00098">MIKMIDISequencer.m:98</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_sequencer_html_ad0d8cd85164dfee28483297808e71031"><div class="ttname"><a href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#ad0d8cd85164dfee28483297808e71031">MIKMIDISequencer::maximumLookAheadInterval</a></div><div class="ttdeci">NSTimeInterval maximumLookAheadInterval</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d43/_m_i_k_m_i_d_i_sequencer_8h_source.html#l00424">MIKMIDISequencer.h:424</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_sequencer_html_ad604e1615b7bd4576487a2a469a25f84"><div class="ttname"><a href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#ad604e1615b7bd4576487a2a469a25f84">MIKMIDISequencer::preRoll</a></div><div class="ttdeci">MusicTimeStamp preRoll</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d43/_m_i_k_m_i_d_i_sequencer_8h_source.html#l00314">MIKMIDISequencer.h:314</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_sequencer_html_ae7ef1a6bb3bd2c3dc4e32d84dbc84396"><div class="ttname"><a href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#ae7ef1a6bb3bd2c3dc4e32d84dbc84396">+[MIKMIDISequencer sequencer]</a></div><div class="ttdeci">instancetype sequencer()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/_m_i_k_m_i_d_i_sequencer_8m_source.html#l00098">MIKMIDISequencer.m:136</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_sequencer_html_aef58fb3a76437df11377167f1edd4112"><div class="ttname"><a href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#aef58fb3a76437df11377167f1edd4112">MIKMIDISequencer::needsCurrentTempoUpdate</a></div><div class="ttdeci">BOOL needsCurrentTempoUpdate</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/_m_i_k_m_i_d_i_sequencer_8m_source.html#l00093">MIKMIDISequencer.m:93</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_sequencer_html_aef8a43dd9cfc6208fe1b8c394466eab2"><div class="ttname"><a href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#aef8a43dd9cfc6208fe1b8c394466eab2">-[MIKMIDISequencer startPlayback]</a></div><div class="ttdeci">void startPlayback()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/_m_i_k_m_i_d_i_sequencer_8m_source.html#l00098">MIKMIDISequencer.m:149</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_sequencer_html_af2bbc8b3ac58108540a5c51dbabc58e7"><div class="ttname"><a href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#af2bbc8b3ac58108540a5c51dbabc58e7">MIKMIDISequencer::startingTimeStamp</a></div><div class="ttdeci">MusicTimeStamp startingTimeStamp</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/_m_i_k_m_i_d_i_sequencer_8m_source.html#l00087">MIKMIDISequencer.m:87</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_sequencer_html_afc1cb8eb8adf0c06cdfb5f8e55f9daed"><div class="ttname"><a href="../../d5/d18/interface_m_i_k_m_i_d_i_sequencer.html#afc1cb8eb8adf0c06cdfb5f8e55f9daed">MIKMIDISequencer::tracksToDefaultSynthsMap</a></div><div class="ttdeci">NSMapTable * tracksToDefaultSynthsMap</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/ddf/_m_i_k_m_i_d_i_sequencer_8m_source.html#l00091">MIKMIDISequencer.m:91</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_synthesizer_html"><div class="ttname"><a href="../../df/deb/interface_m_i_k_m_i_d_i_synthesizer.html">MIKMIDISynthesizer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d56/_m_i_k_m_i_d_i_synthesizer_8h_source.html#l00030">MIKMIDISynthesizer.h:30</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_tempo_event_html"><div class="ttname"><a href="../../d5/da9/interface_m_i_k_m_i_d_i_tempo_event.html">MIKMIDITempoEvent</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/_m_i_k_m_i_d_i_tempo_event_8h_source.html#l00017">MIKMIDITempoEvent.h:18</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_tempo_event_html_a2c7f0b75bf80d8c7c7751800af7a09a6"><div class="ttname"><a href="../../d5/da9/interface_m_i_k_m_i_d_i_tempo_event.html#a2c7f0b75bf80d8c7c7751800af7a09a6">+[MIKMIDITempoEvent tempoEventWithTimeStamp:tempo:]</a></div><div class="ttdeci">instancetype tempoEventWithTimeStamp:tempo:(MusicTimeStamp timeStamp,[tempo] Float64 bpm)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6a/_m_i_k_m_i_d_i_tempo_event_8m_source.html#l00001">MIKMIDITempoEvent.m:26</a></div></div>
<div class="ttc" id="ainterface_m_i_k_m_i_d_i_track_html"><div class="ttname"><a href="../../db/dce/interface_m_i_k_m_i_d_i_track.html">MIKMIDITrack</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dd9/_m_i_k_m_i_d_i_track_8h_source.html#l00027">MIKMIDITrack.h:28</a></div></div>
<div class="ttc" id="ainterface_m_i_k_mutable_m_i_d_i_command_html"><div class="ttname"><a href="../../d7/deb/interface_m_i_k_mutable_m_i_d_i_command.html">MIKMutableMIDICommand</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d98/_m_i_k_m_i_d_i_command_8h_source.html#l00222">MIKMIDICommand.h:223</a></div></div>
<div class="ttc" id="ainterface_m_i_k_mutable_m_i_d_i_command_html_a5783fcba63015d7114b98fa17241e5d7"><div class="ttname"><a href="../../d7/deb/interface_m_i_k_mutable_m_i_d_i_command.html#a5783fcba63015d7114b98fa17241e5d7">MIKMutableMIDICommand::midiTimestamp</a></div><div class="ttdeci">MIDITimeStamp midiTimestamp</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d98/_m_i_k_m_i_d_i_command_8h_source.html#l00229">MIKMIDICommand.h:229</a></div></div>
<div class="ttc" id="ainterface_m_i_k_mutable_m_i_d_i_control_change_event_html"><div class="ttname"><a href="../../da/dce/interface_m_i_k_mutable_m_i_d_i_control_change_event.html">MIKMutableMIDIControlChangeEvent</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/da3/_m_i_k_m_i_d_i_control_change_event_8h_source.html#l00040">MIKMIDIControlChangeEvent.h:41</a></div></div>
<div class="ttc" id="ainterface_m_i_k_mutable_m_i_d_i_control_change_event_html_a2c0b2e6a0795b126216625e43c207a11"><div class="ttname"><a href="../../da/dce/interface_m_i_k_mutable_m_i_d_i_control_change_event.html#a2c0b2e6a0795b126216625e43c207a11">MIKMutableMIDIControlChangeEvent::channel</a></div><div class="ttdeci">UInt8 channel</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/da3/_m_i_k_m_i_d_i_control_change_event_8h_source.html#l00047">MIKMIDIControlChangeEvent.h:47</a></div></div>
<div class="ttc" id="ainterface_m_i_k_mutable_m_i_d_i_control_change_event_html_a74a55904c89822f141ed7985d47a07f6"><div class="ttname"><a href="../../da/dce/interface_m_i_k_mutable_m_i_d_i_control_change_event.html#a74a55904c89822f141ed7985d47a07f6">MIKMutableMIDIControlChangeEvent::controllerNumber</a></div><div class="ttdeci">NSUInteger controllerNumber</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/da3/_m_i_k_m_i_d_i_control_change_event_8h_source.html#l00042">MIKMIDIControlChangeEvent.h:42</a></div></div>
<div class="ttc" id="ainterface_m_i_k_mutable_m_i_d_i_control_change_event_html_a8e8b56c6563098932d88e4f668c74ca5"><div class="ttname"><a href="../../da/dce/interface_m_i_k_mutable_m_i_d_i_control_change_event.html#a8e8b56c6563098932d88e4f668c74ca5">MIKMutableMIDIControlChangeEvent::controllerValue</a></div><div class="ttdeci">NSUInteger controllerValue</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/da3/_m_i_k_m_i_d_i_control_change_event_8h_source.html#l00043">MIKMIDIControlChangeEvent.h:43</a></div></div>
<div class="ttc" id="ainterface_m_i_k_mutable_m_i_d_i_control_change_event_html_af2c535797be7f7a7273975b2e8c2ef7b"><div class="ttname"><a href="../../da/dce/interface_m_i_k_mutable_m_i_d_i_control_change_event.html#af2c535797be7f7a7273975b2e8c2ef7b">MIKMutableMIDIControlChangeEvent::timeStamp</a></div><div class="ttdeci">MusicTimeStamp timeStamp</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/da3/_m_i_k_m_i_d_i_control_change_event_8h_source.html#l00045">MIKMIDIControlChangeEvent.h:45</a></div></div>
<div class="ttc" id="ainterface_m_i_k_mutable_m_i_d_i_event_html"><div class="ttname"><a href="../../df/d47/interface_m_i_k_mutable_m_i_d_i_event.html">MIKMutableMIDIEvent</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/ddb/_m_i_k_m_i_d_i_event_8h_source.html#l00178">MIKMIDIEvent.h:179</a></div></div>
<div class="ttc" id="ainterface_m_i_k_mutable_m_i_d_i_event_html_a007f95632be233226611d9c2de76da6a"><div class="ttname"><a href="../../df/d47/interface_m_i_k_mutable_m_i_d_i_event.html#a007f95632be233226611d9c2de76da6a">MIKMutableMIDIEvent::timeStamp</a></div><div class="ttdeci">MusicTimeStamp timeStamp</div><div class="ttdef"><b>Definition:</b> <a href="../../da/ddb/_m_i_k_m_i_d_i_event_8h_source.html#l00181">MIKMIDIEvent.h:181</a></div></div>
<div class="ttc" id="ainterface_m_i_k_mutable_m_i_d_i_note_event_html"><div class="ttname"><a href="../../d4/d28/interface_m_i_k_mutable_m_i_d_i_note_event.html">MIKMutableMIDINoteEvent</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/db3/_m_i_k_m_i_d_i_note_event_8h_source.html#l00102">MIKMIDINoteEvent.h:103</a></div></div>
<div class="ttc" id="aprotocol_m_i_k_m_i_d_i_command_scheduler-p_html"><div class="ttname"><a href="../../da/d84/protocol_m_i_k_m_i_d_i_command_scheduler-p.html">MIKMIDICommandScheduler-p</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/ddc/_m_i_k_m_i_d_i_command_scheduler_8h_source.html#l00022">MIKMIDICommandScheduler.h:22</a></div></div>
<div class="ttc" id="aprotocol_m_i_k_m_i_d_i_command_scheduler-p_html_a0fc929bd9c9c1e4816e6c5a8f58ba48f"><div class="ttname"><a href="../../da/d84/protocol_m_i_k_m_i_d_i_command_scheduler-p.html#a0fc929bd9c9c1e4816e6c5a8f58ba48f">-[MIKMIDICommandScheduler-p scheduleMIDICommands:]</a></div><div class="ttdeci">void scheduleMIDICommands:(MIKArrayOf(MIKMIDICommand *) *commands)</div></div>
<div class="ttc" id="astruct_m_i_k_m_i_d_i_time_signature_html"><div class="ttname"><a href="../../d9/d16/struct_m_i_k_m_i_d_i_time_signature.html">MIKMIDITimeSignature</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d5a/_m_i_k_m_i_d_i_meta_time_signature_event_8h_source.html#l00017">MIKMIDIMetaTimeSignatureEvent.h:17</a></div></div>
<div class="ttc" id="astruct_m_i_k_m_i_d_i_time_signature_html_a6dfcdae2e5c313b9bde086d6fe0c9fb6"><div class="ttname"><a href="../../d9/d16/struct_m_i_k_m_i_d_i_time_signature.html#a6dfcdae2e5c313b9bde086d6fe0c9fb6">MIKMIDITimeSignature::numerator</a></div><div class="ttdeci">UInt8 numerator</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d5a/_m_i_k_m_i_d_i_meta_time_signature_event_8h_source.html#l00018">MIKMIDIMetaTimeSignatureEvent.h:18</a></div></div>
<div class="ttc" id="astruct_m_i_k_m_i_d_i_time_signature_html_a83b1078afa74b6a31f0bab7511e2d19f"><div class="ttname"><a href="../../d9/d16/struct_m_i_k_m_i_d_i_time_signature.html#a83b1078afa74b6a31f0bab7511e2d19f">MIKMIDITimeSignature::denominator</a></div><div class="ttdeci">UInt8 denominator</div><div class="ttdoc">The number of beats per measure.</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d5a/_m_i_k_m_i_d_i_meta_time_signature_event_8h_source.html#l00019">MIKMIDIMetaTimeSignatureEvent.h:19</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.0
</small></address>
</body>
</html>
